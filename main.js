!function(){"use strict";var e=class{constructor(e,t,s,r,i,n){this._name=e.name,this._link=e.link,this._id=e._id,this._likes=e.likes,this._cardSelector=s,this._handleCardClick=r,this._handleDeleteClick=i,this._handleLikeClick=n,this._userId=t,this._userCardOwnerId=e.owner._id}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setCardEventListeners(){this._likeButton.addEventListener("click",(()=>{this._handleLikeClick(this._id)})),this._deleteButton.addEventListener("click",(()=>{this._handleDeleteClick(this._id)})),this._cardImage.addEventListener("click",(()=>{this._handleCardPreview()}))}_handleCardLike(){this._likeButton.classList.toggle("card__like-button_active")}_handleCardPreview(){this._handleCardClick(this._name,this._link)}deleteCard(){this._cardElement.remove(),this._cardElement=null}cardLiked(){return this._likes.some((e=>e._id===this._userId))}_setLikeButtonState(){this._cardLikes=this._cardElement.querySelector(".card__likes-counter"),this._cardLikes.textContent=this._likes.length,this.cardLiked()?this._likeButton.classList.add("card__like-button_active"):this._likeButton.classList.remove("card__like-button_active")}setLikesCounter(e){this._likes=e,this._setLikeButtonState()}getView(){return this._cardElement=this._getTemplate(),this._cardElement.querySelector(".card__name").textContent=this._name,this._cardImage=this._cardElement.querySelector(".card__image"),this._cardImage.src=this._link,this._cardImage.alt=this._name,this._cardLikes=this._cardElement.querySelector(".card__likes-counter"),this._cardLikes=this._likes.length,this._likeButton=this._cardElement.querySelector(".card__like-button"),this._deleteButton=this._cardElement.querySelector(".card__delete-button"),this._previewButton=this._cardElement.querySelector("#preview-button"),this._userId!=this._userCardOwnerId&&this._deleteButton.remove(),this.cardLiked()?this._likeButton.classList.add("card__like-button_active"):this._likeButton.classList.remove("card__like-button_active"),this._setCardEventListeners(),this._cardElement}},t=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasInvalidInput(){return!this._inputElements.every((e=>e.validity.valid))}_enableSubmitButton(){this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1}_disableSubmitButton(){this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0}toggleButtonState(){this._hasInvalidInput(this._inputElements)?this._disableSubmitButton():this._enableSubmitButton()}_setEventListeners(){this._inputElements=[...this._form.querySelectorAll(this._inputSelector)],this._buttonElement=this._form.querySelector(this._submitButtonSelector),this.toggleButtonState(),this._form.addEventListener("reset",(()=>{setTimeout((()=>{this.toggleButtonState()}),0)})),this._inputElements.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}};var s=class{constructor(e){let{popupSelector:t}=e;var s,r,i;s=this,i=e=>{(e.target.classList.contains("modal_opened")||e.target.classList.contains("modal__close"))&&this.close()},(r=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(r="_handleOverlayClose"))in s?Object.defineProperty(s,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):s[r]=i,this._popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose),document.addEventListener("mousedown",this._handleOverlayClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose),document.removeEventListener("mousedown",this._handleOverlayClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popupElement.addEventListener("click",this.close())}},r=class extends s{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._inputList=this._popupForm.querySelectorAll(".modal__input"),this._handleFormSubmit=t}_getInputValues(){return this._formValues={},this._inputList.forEach((e=>{this._formValues[e.name]=e.value})),this._formValues}setEventListeners(){super.setEventListeners(),this._popupElement.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this.close()}))}close(){super.close(),this._popupForm.reset()}};const i={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__error_input_type",errorClass:"modal__error_visible"},n=document.querySelector(".profile__edit-button"),o=document.querySelector("#profile-edit-modal"),a=document.querySelector(".profile__title"),l=document.querySelector(".profile__description"),d=document.querySelector("#modal-name"),c=document.querySelector("#modal-description"),h=document.querySelector("#card-edit-modal"),_=document.querySelector(".profile__add-button"),u=document.querySelector("#profileimage-edit-modal"),m=document.querySelector("#profileimage-link"),p=document.querySelector(".profile__avatar-edit"),v=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error ${e.status}`)}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{method:"GET",headers:this._headers}).then(this._checkResponse)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{method:"GET",headers:this._headers}).then(this._checkResponse)}getAPIInfo(){return Promise.all([this.getUserInfo(),this.getInitialCards()])}updateProfileInfo(e,t){return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})}).then(this._checkResponse)}addNewCard(e,t){return fetch(`${this._baseUrl}/cards`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,link:t})}).then(this._checkResponse)}deleteUserCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}addCardLikes(e){return fetch(`${this._baseUrl}/cards/likes/${e}`,{method:"PUT",headers:this._headers}).then(this._checkResponse)}removeCardLikes(e){return fetch(`${this._baseUrl}/cards/likes/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}updateProfileAvatar(e){return fetch(`${this._baseUrl}/users/me/${e}`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._checkResponse)}}({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"871cfd79-24b1-469e-9aa3-4e4a6ff58fdc","Content-Type":"application/json"}}),E=new t(i,o),k=new t(i,h),f=new t(i,u);f.enableValidation(),E.enableValidation(),k.enableValidation(),f.enableValidation();const b=new class{constructor(e){let{userName:t,userJob:s,userAvatar:r}=e;this._userName=t,this._userDescription=s,this._userAvatar=r}getUserInfo(){return{title:this._userName.textContent,description:this._userDescription.textContent}}setUserInfo(e){this._userName.textContent=e.title,this._userDescription.textContent=e.description,this._userAvatar.src=e.avatar,this._userAvatar.alt=e.title}}({userName:a,userJob:l,userAvatar:m});n.addEventListener("click",(function(){const{description:e,title:t}=b.getUserInfo();d.value=t,c.value=e,L.open()}));const L=new r("#profile-edit-modal",(e=>{v.updateProfileInfo(e).then((e=>{b.setUserInfo(e),L.close()})).catch((e=>{console.log(e)}))}));L.setEventListeners();const S=new r("#profileimage-edit-modal",(e=>{v.updateProfileAvatar(e.link).then((e=>{b.setUserInfo(e),S.close()})).catch((e=>{console.log(e)}))}));p.addEventListener("click",(()=>S.open())),S.setEventListeners();const C=new class extends s{constructor(e){super({popupSelector:e}),this._previewImage=this._popupElement.querySelector(".preview-modal__image"),this._previewName=this._popupElement.querySelector(".preview-modal__caption")}open(e,t){this._previewImage.src=t,this._previewImage.alt=e,this._previewName.textContent=e,super.open()}}("#preview-modal"),y=new class extends s{constructor(e){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form")}setSubmitAction(e){this._handleSubmit=e}setEventListeners(){super.setEventListeners(),this._popupElement.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmit()}))}}("#delete-confirm-modal");let g;function I(t){const s=new e(t,g,"#card-template",((e,t)=>{C.open(e,t)}),(e=>{y.open(),y.setSubmitAction((()=>{v.deleteUserCard(e).then((()=>{y.close(),s.deleteCard()}))}))}),(e=>(s.cardLiked()?v.addCardLikes(e).then((e=>{s.setLikesCounter(e.likes)})).catch((e=>{console.log(e)})):v.removeCardLikes(e).then((e=>{s.setLikesCounter(e.likes)})).catch((e=>{console.log(e)})),s)))}y.setEventListeners();const w=new class{constructor(e,t){let{renderer:s}=e;this._renderer=s,this._container=document.querySelector(t)}renderItems(){cards.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({renderer:e=>{const t=I(e);w.addItem(t.getView())}},".cards__list"),q=new r("#card-edit-modal",(e=>{v.addNewCard(e).then((e=>{I(e),q.close()})).catch((e=>{console.log(e)}))}));_.addEventListener("click",(()=>q.open())),q.setEventListeners(),v.getAPIInfo().then((e=>{let[t,s]=e;g=s._id,w.renderItems(t),b.setUserInfo(s)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixDQUdBQyxRQUFRRCxHQUNOL0wsS0FBSzRMLFdBQVdLLFFBQVFGLEVBQzFCLEdKdUpBLENBQ0VMLFNBQVdQLElBQ1QsTUFBTWUsRUFBVWhCLEVBQVdDLEdBQzNCSyxFQUFZUSxRQUFRRSxFQUFRMUosVUFBVSxHQUcxQyxnQkFrQkkySixFQUFlLElBQUkvQixFQUFjLG9CQUFxQkMsSUFFMURoRCxFQUNHd0IsV0FBV3dCLEdBQ1hqQyxNQUFNMUksSUFDTHdMLEVBQVd4TCxHQUNYeU0sRUFBYTlHLE9BQU8sSUFFckJpRixPQUFPQyxJQUNOQyxRQUFRQyxJQUFJRixFQUFJLEdBQ2hCLElBT050RCxFQUFlNUYsaUJBQWlCLFNBQVMsSUFBTThLLEVBQWExRyxTQUU1RDBHLEVBQWF0RyxvQkFJYndCLEVBQUlpQixhQUFhRixNQUFLbkQsSUFBdUIsSUFBckI2RyxFQUFPTSxHQUFTbkgsRUFDdEN0RixFQUFTeU0sRUFBUy9MLElBQ2xCbUwsRUFBWUssWUFBWUMsR0FBUXJDLEVBQVNTLFlBQVlrQyxFQUFTLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvL2F1dGhvcml6YXRpb24gdG9rZW46IDg3MWNmZDc5LTI0YjEtNDY5ZS05YWEzLTRlNGE2ZmY1OGZkY1xuLy9ncm91cElEOiBncm91cC0xMlxuXG4vL0NyZWF0ZSBhIGNsYXNzIGZvciBBcGlcbi8vQ29udGFpbnMgbWV0aG9kcyBmb3IgYWxsIHRoZSByZXF1ZXN0cyB0byBiZSBtYWRlXG4vL0FsbCByZXF1ZXN0cyBtYWRlIGZyb20gdGhpcyBjbGFzc1xuLy9BbGwgcmVxdWVzdHMgc2hvdWxkIGJlIG1ldGhvZHMgb2YgdGhpcyBjbGFzc1xuLy9Db25zdHJ1Y3RvcnMgZm9yIHRoZSBhcGkgY29uc3QgY2FsbGVkIGluIGluZGV4LmpzXG5jbGFzcyBBcGkge1xuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGhlYWRlcnMgfSkge1xuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsOyAvL2Jhc2V1cmwgaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cElkXG4gICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XG4gIH1cbiAgLy9jaGVja1Jlc3BvbnNlKCkgLT4gQ2hlY2sgcmVzcG9uc2VzIGFuZCBmb3IgZXJyb3JzIC0gZ2VuZXJhbCBjaGVja3RvIGJlIGFkZGVkIHRvIGFsbCBtZXRob2RzIHRvIGhhbmRsZSBlcnJvcnMvY29udGludWUgd2l0aCB0aGVuIHN0YXRlbWVudHNcbiAgLy9DaGVjayByZXNwb25zZSBmcm9tIGVhY2ggZmV0Y2ggcmVxdWVzdCBmb3IgcmVzcG9uc2UgYW5kIHBhcnNlIGZyb20gSlNPTiBvYmogZm9yIHByb21pc2Ugb3IgZm9yIHNlcnZlciBlcnJvciB0byBkZWNpZGUgbmV4dCBzdGVwIHdpdGggcHJvbWlzZVxuICBfY2hlY2tSZXNwb25zZShyZXMpIHtcbiAgICBpZiAocmVzLm9rKSB7XG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvciAke3Jlcy5zdGF0dXN9YCk7XG4gIH1cbiAgLy9nZXRVc2VySW5mbygpIC0+IHJldHVybnMgbmFtZSwgYWJvdXQsIGF2YXRhcixfaWQsIGNvaG9ydFxuICAvL3NldCB1cmwgdG8gZmV0Y2ggZnJvbSB1cmwgb2YgcmVxdWVzdGVkIHJlc291Y2UsIGFuZCBvcHRpb25zIG9iamVjdCB3L21ldGhvZCBhbmQgaGVhZGVycywgdGhlbiBjaGVjayBzZXJ2ZXIgcmVzcG9uc2UgdG8gcmVxdWVzdCB3L2Vycm9yIHByb21pc2VcbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG4gIC8vZ2V0SW5pdGlhbENhcmRzKCkgLT4gcmV0dXJucyBuYW1lLGxpbmssIF9pZCxsaWtlc1xuICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG4gIC8vZ2V0QVBJSW5mbyAtPiBjYXJkcyByZW5kZXJlZCBhZnRlciB1c2VyIGluZm8gcmVjZWl2ZWQgZnJvbSBzZXJ2ZXIgdy9Qcm9taXNlLmFsbCgpXG4gIGdldEFQSUluZm8oKSB7XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLmdldFVzZXJJbmZvKCksIHRoaXMuZ2V0SW5pdGlhbENhcmRzKCldKTtcbiAgfVxuICAvL3VwZGF0ZVByb2ZpbGVJbmZvKG5hbWUsYWJvdXQpIC0+IGJvZHk6bmFtZSxhYm91dCAoc3BlY2lmaWNhbGx5IGZvciBuYW1lIGFuZCBhYm91dCBpbiBzdHJpbmcgZm9ybWF0KVxuICB1cGRhdGVQcm9maWxlSW5mbyhuYW1lLCBhYm91dCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgYWJvdXQsXG4gICAgICB9KSxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG4gIC8vYWRkTmV3Q2FyZChuYW1lLGxpbmspIC0+IGJvZHk6bmFtZSxsaW5rKHNwZWNpZmljYWxseSBmb3IgbmFtZSBhbmQgbGluayBpbiBzdHJpbmcgZm9ybWF0KVxuICBhZGROZXdDYXJkKG5hbWUsIGxpbmspIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIGxpbmssXG4gICAgICB9KSxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG4gIC8vZGVsZXRlVXNlckNhcmQoY2FyZElkKSAtPiAgX2lkIGFkZGVkIHRvIFVSTCBpbiByZXF1ZXN0XG4gIGRlbGV0ZVVzZXJDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cbiAgLy9hZGRDYXJkTGlrZXMoY2FyZElkKS0+X2lkIGFkZGVkIHRvIFVSTCBpbiByZXF1ZXN0XG4gIGFkZENhcmRMaWtlcyhjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG4gIC8vcmVtb3ZlQ2FyZExpa2VzKGNhcmRJZCktPl9pZCBhZGRlZCB0byBVUkwgaW4gcmVxdWVzdFxuICByZW1vdmVDYXJkTGlrZXMoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuICAvL3VwZGF0ZVByb2ZpbGVBdmF0YXIoYXZhdGFyKSAtPiBib2R5OmF2YXRhciAoc3BlY2lmaWNhbGx5IGZvciBhdmF0YXIgaW4gc3RyaW5nIGZvcm1hdClcbiAgdXBkYXRlUHJvZmlsZUF2YXRhcihhdmF0YXIpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvJHthdmF0YXJ9YCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBhdmF0YXIgfSksXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBBcGk7XG5cbi8vLy9IVE1MX0NTUy9pbmRleC5qc1xuLy8vYWRkIGdldCBhcHAgaW5mbyBtZXRob2QgaW50byBpbmRleC5qcyB0byBnZXQgdXNlcklkIGFuZCBhc3NpZ24gZm9yIHVzZSBpbiBKUyBjb2RlIGFuZCB0byByZW5kZXIgY2FyZHMgb24gb3BlbmluZ1xuLy8vL0dldCBsaWtlcyBkYXRhIGZyb20gQ2FyZHNkYXRhYXJyYXkgdG8gc2hvdyBvbiBwYWdlc1xuLy8vL0FkZCBsaWtlcyBjb3VudCBmb3JtYXQgdW5kZXIgbGlrZSBidXR0b24gLSBkYXRhIGNoYW5nZXMgbGlua2VkIHRvIHNlcnZlclxuLy8vL1VYIHNhdmluZyBidXR0b24gd2hpbGUgbG9hZGluZyAtIHNldCB0aW1lci93aXRoIEFQSSByZXF1ZXN0IHRvb1xuXG4vLy8vLy9ET05FIFNPIEZBUlxuLy8vQWRkIFBvcHVwIGZvcm0gYWZ0ZXIgZGVsZXRlIGJ1dHRvbiBjbGljayAtIGh0bWwgbW9kYWwgKyBpbmRleC5qcyBjYWxsc1xuLy8vQkVGT1JFIEFQSVxuLy8vLy8vQ29kZSBzbyBiaW4gaXMgb25seSBvbiB1c2VyJ3MgY2FyZCAtIHByZXZlbnQgb3RoZXIgdXNlcnMgdG8gZGVsZXRlIG90aGVyIHVzZXIncyBjYXJkXG4vLy8vUHJvZmlsZSBwaWMgaG92ZXIgZWRpdCBidXR0b25cbi8vLy9Qcm9maWxlIHBpYyBwb3B1cGZvcm1cbiIsIi8vQUREIHVzZXJJZCBhZnRlciBkYXRhIGluIGNvbnN0cnVjdG9yLCB1bmNvbW1lbnRcblxuY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIGRhdGEsXG4gICAgdXNlcklkLFxuICAgIGNhcmRTZWxlY3RvcixcbiAgICBoYW5kbGVDYXJkQ2xpY2ssXG4gICAgaGFuZGxlRGVsZXRlQ2xpY2ssXG4gICAgaGFuZGxlTGlrZUNsaWNrXG4gICkge1xuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcbiAgICB0aGlzLl9pZCA9IGRhdGEuX2lkO1xuICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcztcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrOyAvL2FkZCBtZXRob2QgdG8gY29uc3RydWN0b3JcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDbGljayA9IGhhbmRsZURlbGV0ZUNsaWNrO1xuICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayA9IGhhbmRsZUxpa2VDbGljaztcbiAgICB0aGlzLl91c2VySWQgPSB1c2VySWQ7XG4gICAgdGhpcy5fdXNlckNhcmRPd25lcklkID0gZGF0YVtcIm93bmVyXCJdLl9pZDsgLy9zaG93cyBlcnJvciBvbiBpbmRleC5qcyBsb2NhbFxuICB9XG5cbiAgLy9BZGQgbWV0aG9kcyBmb3IgY2FyZHMgaGVyZVxuICAvL19nZXRUZW1wbGF0ZSgpIGZyb20gY2FyZFNlbGVjdG9yIHdpdGggY2xvbmUgdG8gY3JlYXRlIHRlbXBsYXRlXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xuICB9XG5cbiAgLy9fc2V0Q2FyZEV2ZW50TGlzdGVuZXJzIGZvciBjbGljayBldmVudHMgd2hhdCBhcmUgdGhleSBmb3JcbiAgX3NldENhcmRFdmVudExpc3RlbmVycygpIHtcbiAgICAvL0xpa2VcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sodGhpcy5faWQpO1xuICAgIH0pO1xuXG4gICAgLy9EZWxldGVcbiAgICB0aGlzLl9kZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrKHRoaXMuX2lkKTtcbiAgICB9KTtcbiAgICAvL1ByZXZpZXdcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRQcmV2aWV3KCk7XG4gICAgfSk7XG4gIH1cblxuICAvL19oYW5kbGVFdmVudHMoKSBzZXQgZXZlbnQgaGFuZGxlcnNcbiAgX2hhbmRsZUNhcmRMaWtlKCkge1xuICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgfVxuXG4gIC8qX2hhbmRsZUNhcmREZWxldGUoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xuICB9Ki9cblxuICBfaGFuZGxlQ2FyZFByZXZpZXcoKSB7XG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX25hbWUsIHRoaXMuX2xpbmspO1xuICB9XG5cbiAgZGVsZXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IG51bGw7XG4gIH1cblxuICBjYXJkTGlrZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2xpa2VzLnNvbWUoKGxpa2UpID0+IGxpa2UuX2lkID09PSB0aGlzLl91c2VySWQpOyAvL2NoZWNrcyBpZiB2YWx1ZXMgZm9yIHNwZWNpZmljIHVzZXJJZCBpbiB0aGUgbGlrZXMgYXJyYXQgd2l0aCB0aGUgc2FtZSBpZCBhbmQgcmV0dXJuc1xuICB9XG5cbiAgX3NldExpa2VCdXR0b25TdGF0ZSgpIHtcbiAgICB0aGlzLl9jYXJkTGlrZXMgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2VzLWNvdW50ZXJcIik7XG4gICAgdGhpcy5fY2FyZExpa2VzLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xuICAgIGlmICh0aGlzLmNhcmRMaWtlZCgpKSB7XG4gICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgICB9XG4gIH1cblxuICBzZXRMaWtlc0NvdW50ZXIobGlrZXMpIHtcbiAgICB0aGlzLl9saWtlcyA9IGxpa2VzO1xuICAgIHRoaXMuX3NldExpa2VCdXR0b25TdGF0ZSgpO1xuICB9XG5cbiAgLy9hZGQgZWxlbWVudHMgYW5kIGZ1bmN0aW9uYWxpdHkgdG8gY2FyZFxuICBnZXRWaWV3KCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICAvL2dlbmVyYXRlcyBjYXJkIG5hbWUsIGltYWdlIHNyYyBhbmQgYWx0XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19uYW1lXCIpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX2NhcmRMaWtlcyA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZXMtY291bnRlclwiKTtcbiAgICB0aGlzLl9jYXJkTGlrZXMgPSB0aGlzLl9saWtlcy5sZW5ndGg7IC8vcmV0dXJuIGxlbmd0aCBvZiBhcnJheSB3aXRoIGNvdW50IG9mIGxpa2VzXG4gICAgLy9lbmFibGVzIGNsaWNrSGFuZGxlciBmdW5jdGlvbnNcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiXG4gICAgKTtcbiAgICB0aGlzLl9wcmV2aWV3QnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcmV2aWV3LWJ1dHRvblwiKTtcbiAgICAvL0lmIHRoZSB1c2VyIGhhcyBub3QgYWRkZWQgdGhlIGNhcmQsIHJlbW92ZSB0aGUgZGVsZXRlIGJ1dHRvbiBvbiB0aGUgY2FyZFxuICAgIGlmICh0aGlzLl91c2VySWQgIT0gdGhpcy5fdXNlckNhcmRPd25lcklkKSB7XG4gICAgICB0aGlzLl9kZWxldGVCdXR0b24ucmVtb3ZlKCk7XG4gICAgfVxuICAgIC8vaWYgc3RhdGVtZW50IGZvciBjYXJkIGxpa2VkIHN0YXRlIHdpdGggYnV0dG9uIGFjdGl2ZS9pbmFjdGl2ZVxuICAgIGlmICh0aGlzLmNhcmRMaWtlZCgpKSB7XG4gICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgICB9XG4gICAgdGhpcy5fc2V0Q2FyZEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENhcmQ7XG4iLCJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBjb25maWcuaW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gY29uZmlnLmlucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gY29uZmlnLmVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZm9ybSA9IGZvcm1FbGVtZW50O1xuICB9XG5cbiAgLy9BZGQgTWV0aG9kc1xuICAvL1Nob3cgRXJyb3IgRnVuY3Rpb24gd2l0aCBWYWxpZGF0aW9uIE1lc3NhZ2VcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgLy9IaWRlIEVycm9yIEZ1bmN0aW9uIGFuZCByZW1vdmVWYWxpZGF0aW9uIE1lc3NhZ2VcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIC8vQ2hlY2sgaW5wdXQgZWxlbWVudCB2YWxpZGl0eSAtPiBpZiByZXR1cm5zIGZhbHNlLCBzaG93IGlucHV0IGVycm9yXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfVxuICB9XG4gIC8vLy9cblxuICAvL2lzIElucHV0IHZhbGlkOiBpbnB1dCBsaXN0IGlzIGZyb20gaW5wdXRFbGVtZW50c1xuICBfaGFzSW52YWxpZElucHV0KCkge1xuICAgIHJldHVybiAhdGhpcy5faW5wdXRFbGVtZW50cy5ldmVyeShcbiAgICAgIChpbnB1dEVsZW1lbnQpID0+IGlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZFxuICAgICk7XG4gIH1cbiAgLy8vL1xuICAvL0VuYWJsZSBCdXR0b25cbiAgX2VuYWJsZVN1Ym1pdEJ1dHRvbigpIHtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xuICB9XG4gIC8vLy9cblxuICAvL0Rpc2FibGUgQnV0dG9uXG4gIF9kaXNhYmxlU3VibWl0QnV0dG9uKCkge1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbiAgfVxuICAvLy8vXG5cbiAgLy8vL1xuICAvL3RvZ2dsZSBidXR0b24gc3RhdGVcbiAgdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCh0aGlzLl9pbnB1dEVsZW1lbnRzKSkge1xuICAgICAgdGhpcy5fZGlzYWJsZVN1Ym1pdEJ1dHRvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9lbmFibGVTdWJtaXRCdXR0b24oKTtcbiAgICB9XG4gIH1cbiAgLy8vL1xuICAvLy8vXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzID0gWy4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKV07XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gICAgLy8gaGVyZSB5b3UgZGlzYWJsZSB0aGUgYnV0dG9uIHdoZW4geW91IHN0YXJ0IHRoZSBwcm9qZWN0XG4gICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgIC8vIGhlcmUgeW91IGFkZCB0aGUgYHJlc2V0YCBoYW5kbGVyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwicmVzZXRcIiwgKCkgPT4ge1xuICAgICAgLy8gYHNldFRpbWVvdXRgIGlzIG5lZWRlZCB0byB3YWl0IHRpbGwgdGhlIGZvcm0gaXMgZnVsbHkgcmVzZXQgYW5kIHRoZW4gY2FsbCBgdG9nZ2xlQnV0dG9uU3RhdGVgXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSwgMCk7IC8vIGl04oCZcyBlbm91Z2ggdG8gcHV0IDAgbXMgaGVyZVxuICAgIH0pO1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gZW5hYmxlVmFsaWRhdGlvblxuICAvL0dldCBhbmQgbG9vcCB0aHJvdWdoIGZvcm1FbGVtZW50XG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjtcbiIsIi8vUG9wdXAgY2xhc3Mgb3BlbnMgYW5kIGNsb3NlcyBwb3B1cCB3aW5kb3dcbmNsYXNzIFBvcHVwIHtcbiAgLy9hZGQgY29uc3RydWN0b3IgLSAxcGFyYW0gPSBwb3B1cCBzZWxlY3RvclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7IC8vQ1NTIHNlbGVjdG9yIHBvcHVwIC1wcmV2aWV3L3Byb2ZpbGUvY2FyZGVkaXRcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gIH1cblxuICAvL3B1YmxpYyBvcGVuIG1ldGhvZFxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMuX2hhbmRsZU92ZXJsYXlDbG9zZSk7XG4gIH1cblxuICAvL3B1YmxpYyBjbG9zZSBtZXRob2RcbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5faGFuZGxlT3ZlcmxheUNsb3NlKTtcbiAgfVxuXG4gIC8vc3RvcmUgbG9naWMgZm9yIGNsb3NpbmcgcG9wdXAgd2l0aCBFc2Mga2V5XG4gIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8vYWRkIGNsb3NlIHdpdGggb3ZlcmxheSBmdW5jdGlvblxuICBfaGFuZGxlT3ZlcmxheUNsb3NlID0gKGV2dCkgPT4ge1xuICAgIGlmIChcbiAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfb3BlbmVkXCIpIHx8XG4gICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX19jbG9zZVwiKVxuICAgICkge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfTtcblxuICAvL1NldCBFdmVudCBMaXN0ZW5lcnMgZm9yIFggaWNvbiBhbmQgb3ZlcmxheSBjbGljayBhbmQgRXNjXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIC8vY2xvc2Ugd2l0aCBpY29uIGNsaWNrIGFuZCB3aXRoIEVzYyBhbmQgb3ZlcmxheSBjbGlja1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5jbG9zZSgpKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cDtcbiIsIi8vQ2hpbGQgb2YgUG9wdXBcbi8vQ2hhbmdlcyBwYXJlbnQgdG8gdXBkYXRlIGZvcm1zXG5pbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTsgLy9TZWxlY3QgZm9ybSBjbGFzc1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKTsgLy9nZXQgYWxsIGlucHV0IGZpZWxkIGNsYXNzZXMgZnJvbSBmb3Jtc1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICB9XG5cbiAgLy9Db2xsZWN0IGRhdGEgZnJvbSBpbnB1dCBmaWVsZCBhbmQgcmV0dXJuIGFzIG9iamVjdFxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9OyAvL2VtcHR5IG9iamVjdFxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgdGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzLl9mb3JtVmFsdWVzOyAvLyBpbnB1dCBmaWVsZCBkYXRhIHJldHVybmVkIGFzIG9iamVjdFxuICB9XG5cbiAgLy8vTW9kaWZ5IHBhcmVudCBzZXQgZXZlbnQgbGlzdGVuZXJzIC0gYWRkIHN1Ym1pdCBldiBoYW5kbGVyIGFuZCBjbGljayBldmVudCB0byBjbG9zZSBpY29uXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7IC8vQ2xvc2Ugd2l0aCBYIGljb24gYW5kIG92ZXJsYXkgY2xpY2tcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7IC8vcGFzcyBpbiB2YWx1ZXMgZnJvbSBvYmplY3Qgd2l0aCBpbnB1dCB2YWx1ZXNcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7IC8vY2FsbCBjbG9zZSBmb3IgcGFyZW50XG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7IC8vcmVzZXQgdmFsdWVzIG9mIGZvcm0gb24gY2xvc2UgLSBvbmx5IHdvcmtzIG9uIHRoaXMgY2hpbGRcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhGb3JtO1xuIiwiLy9Jbml0aWFsIENhcmRzIHRvIGJlIHJlbmRlcmVkXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGcgXCIsXG4gIH0sXG5dO1xuXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl9pbnB1dF90eXBlXCIsXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcbn07XG5cbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy9Qcm9maWxlIENvbnN0YW50c1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIlxuKTtcblxuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiKTtcblxuZXhwb3J0IGNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX190aXRsZVwiKTtcblxuZXhwb3J0IGNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCJcbik7XG5cbmV4cG9ydCBjb25zdCBtb2RhbElucHV0TmFtZUZpZWxkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1uYW1lXCIpO1xuXG5leHBvcnQgY29uc3QgbW9kYWxJbnB1dERlc2NyaXB0aW9uRmllbGQgPVxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLWRlc2NyaXB0aW9uXCIpO1xuXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vQ2FyZCBDb25zdGFudHNcbmV4cG9ydCBjb25zdCBjYXJkRWRpdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLWVkaXQtbW9kYWxcIik7XG5leHBvcnQgY29uc3QgY2FyZEVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XG5cbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy9Qcm9maWxlIEF2YXRhciBDb25zdGFudHNcbmV4cG9ydCBjb25zdCBhdmF0YXJFZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIiNwcm9maWxlaW1hZ2UtZWRpdC1tb2RhbFwiXG4pO1xuXG5leHBvcnQgY29uc3QgcHJvZmlsZUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZWltYWdlLWxpbmtcIik7XG5cbmV4cG9ydCBjb25zdCBhdmF0YXJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2F2YXRhci1lZGl0XCIpO1xuIiwiLy9JbXBvcnRzXG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuaW1wb3J0IHtcbiAgaW5pdGlhbENhcmRzLFxuICBjb25maWcsXG4gIHByb2ZpbGVFZGl0QnV0dG9uLFxuICBwcm9maWxlRWRpdE1vZGFsLFxuICBwcm9maWxlTmFtZSxcbiAgcHJvZmlsZURlc2NyaXB0aW9uLFxuICBtb2RhbElucHV0TmFtZUZpZWxkLFxuICBtb2RhbElucHV0RGVzY3JpcHRpb25GaWVsZCxcbiAgY2FyZEVkaXRNb2RhbCxcbiAgY2FyZEVkaXRCdXR0b24sXG4gIGF2YXRhckVkaXRNb2RhbCxcbiAgcHJvZmlsZUF2YXRhcixcbiAgYXZhdGFyQnV0dG9uLFxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5cbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vU2V0dXAgQVBJIGJhc2VVcmwgYW5kIGhlYWRlcnMgd2l0aCB0b2tlbiBhbmQgZ3JvdXBJRFxuLy9Vc2VkIHRvIGNhbGwgbWV0aG9kcyBmcm9tIEFwaSBjbGFzcyBmb3IgZnVuY3Rpb25zXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwLTEyXCIsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiBcIjg3MWNmZDc5LTI0YjEtNDY5ZS05YWEzLTRlNGE2ZmY1OGZkY1wiLFxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICB9LFxufSk7XG5cbi8vT3JkZXIgdG8gY2FsbCBhbmQgZ2V0IGluZm9cbi8vMS4gTG9hZCB1c2VyIGluZm8gYXBpLmdldFVzZXJJbmZvKCkgLS1ET05FIGluIGdldEFQSUluZm9cbi8vMi4gR2V0IGluaXRpYWwgY2FyZHMgd2l0aCBhcGkuZ2V0SW5pdGlhbENhcmRzKCkgLS1ET05FIGluIGdldEFQSUluZm9cbi8vMy4gVXNlIGdldEFQSUluZm8gdG8gYXNzaWduIHVzZXJJZCwgYW5kIGdldCBpbmZvIGZvciBpbml0aWFsIGNhcmRzIGFuZCB1c2VyaW5mbyB2YWx1ZXMgLS0gRE9ORVxuLy80LiBVcGRhdGUgUHJvZmlsZSBpbmZvIHVzaW5nIHVwZGF0ZVByb2ZpbGVJbmZvKG5hbWUsYWJvdXQpIC0+IGFkZGVkIGFuZCBjYWxsZWQgaW4gcHJvZmlsZVBvcHVwIGNhbGxiYWNrIGZ1bmN0aW9uIC0tRE9ORVxuLy81LiBBZGQgbmV3IGNhcmQgaW4gY2FyZENyZWF0ZSB1c2luZyBhZGROZXdDYXJkKG5hbWUsIGxpbmspIC0+IGFkZGVkIGFuZCBjYWxsZWQgaW4gY2FyZEZvcm0gc2VjdGlvbiAtLURPTkVcbi8vNi4gRGVsZXRlIGNhcmQgaW4gY2FyZENyZWF0ZSB1c2luZyBkZWxldGVVc2VyQ2FyZChjYXJkSWQpIC0+IGFkZGVkIGFuZCBjYWxsZWQgaW4gY3JlYXRlQ2FyZCBoYW5kbGVEZWxldGVDbGljayBjYWxsYmFjayBmdW5jdGlvbiAtLURPTkVcbi8vNy4gQWRkL1JlbW92ZSBsaWtlcyBpbiBjYXJkQ3JlYXRlIHVzaW5nIHJlbW92ZUNhcmRMaWtlcyhjYXJkSWQpL2FkZENhcmRMaWtlcyhjYXJkSWQpIC0+IGFkZGVkIGFuZCBjYWxsZWQgaW4gY3JlYXRlQ2FyZCBoYW5kbGVMaWtlQ2xpY2sgY2FsbGJhY2sgZnVuY3Rpb24gLS1ET05FXG4vLzguIFVwZGF0ZSBwcm9maWxlIHBpYyBpbiBhdmF0YXJQb3B1cCB1c2luZyB1cGRhdGVQcm9maWxlQXZhdGFyKGF2YXRhcikgLT4gYWRkZWQgYW5kIGNhbGxlZCBpbiBhdmF0YXJQb3B1cFxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy9HZXQgdXNlciBpbmZvcm1hdGlvbiBhbmQgY2FyZCBkYXRhIGZyb20gc2VydmVyXG5cbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vRm9ybSBWYWxpZGF0aW9ucyBJbnN0YW5jZXMgYW5kIGZ1bmN0aW9uIGZyb20gY2xhc3NcbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBwcm9maWxlRWRpdE1vZGFsKTtcbmNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGNhcmRFZGl0TW9kYWwpO1xuY29uc3QgYXZhdGFyRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgYXZhdGFyRWRpdE1vZGFsKTtcbmF2YXRhckZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5lZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5hZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmF2YXRhckZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy9Qcm9maWxlIE1vZGFsIEZ1bmN0aW9uc1xuLy9Vc2VyIEluZm8gY2FsbGJhY2tcbmNvbnN0IHVzZXJpbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgdXNlck5hbWU6IHByb2ZpbGVOYW1lLFxuICB1c2VySm9iOiBwcm9maWxlRGVzY3JpcHRpb24sXG4gIHVzZXJBdmF0YXI6IHByb2ZpbGVBdmF0YXIsIC8vYWRkZWQgZm9yIGF2YXRhclxufSk7XG5cbmZ1bmN0aW9uIG9wZW5Qcm9maWxlRWRpdEZvcm0oKSB7XG4gIGNvbnN0IHsgZGVzY3JpcHRpb24sIHRpdGxlIH0gPSB1c2VyaW5mby5nZXRVc2VySW5mbygpO1xuICBtb2RhbElucHV0TmFtZUZpZWxkLnZhbHVlID0gdGl0bGU7XG4gIG1vZGFsSW5wdXREZXNjcmlwdGlvbkZpZWxkLnZhbHVlID0gZGVzY3JpcHRpb247XG4gIHByb2ZpbGVQb3B1cC5vcGVuKCk7XG59XG5cbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBvcGVuUHJvZmlsZUVkaXRGb3JtKTtcblxuLy9BZGQgUHJvZmlsZSBGb3JtIGlucHV0IGFuZCBzZXQgb24gcGFnZVxuY29uc3QgcHJvZmlsZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIsICh2YWx1ZXMpID0+IHtcbiAgLy8xLiBzZXQgdGltZXIgbG9hZGluZyB1cCBmb3IgYnV0dG9uXG4gIGFwaVxuICAgIC51cGRhdGVQcm9maWxlSW5mbyh2YWx1ZXMpXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIHVzZXJpbmZvLnNldFVzZXJJbmZvKGRhdGEpO1xuICAgICAgcHJvZmlsZVBvcHVwLmNsb3NlKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9KTtcbiAgLy8gNS4gZmluYWxseSB0dXJuIG9mIHRpbWVyIGZvciBidXR0b25cbn0pO1xuXG5wcm9maWxlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy9BZGQgUHJvZmlsZSBBdmF0YXIgaW5wdXQgYW5kIHNldCBvbiBwYWdlXG5jb25zdCBhdmF0YXJQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI3Byb2ZpbGVpbWFnZS1lZGl0LW1vZGFsXCIsICh2YWx1ZXMpID0+IHtcbiAgLy8xLiBzZXQgdGltZXIgZm9yIGJ1dHRvblxuICBhcGlcbiAgICAudXBkYXRlUHJvZmlsZUF2YXRhcih2YWx1ZXMubGluaylcbiAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgdXNlcmluZm8uc2V0VXNlckluZm8oZGF0YSk7XG4gICAgICBhdmF0YXJQb3B1cC5jbG9zZSgpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfSk7XG4gIC8vY2xvc2UgdGltZXIgYnV0dG9uIHdpdGggZmluYWxseSBzdGF0ZW1lbnRcbn0pO1xuXG5hdmF0YXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGF2YXRhclBvcHVwLm9wZW4oKSk7XG5cbmF2YXRhclBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vQWRkIENhcmQgYW5kIFBvcHVwIEluc3RhbmNlc1xuLy9wcmV2aWV3IFBvcHVwIChwb3B1cFNlbGVjdG9yKVxuY29uc3QgcHJldmlld1BvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI3ByZXZpZXctbW9kYWxcIik7XG5jb25zdCBkZWxldGVDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKFwiI2RlbGV0ZS1jb25maXJtLW1vZGFsXCIpO1xuXG5kZWxldGVDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxubGV0IHVzZXJJZDtcbi8vRnVuY3Rpb24gdG8gY3JlYXRlIG5ldyBjYXJkIGNhbGxlZCB3aXRoIHJlbmRlcmVyIC0gYWRkIHVzZXJJZCBhZnRlciBjYXJkRGF0YSBhbmQgYmVmb3JlICN0ZW1wbGF0ZVxuZnVuY3Rpb24gY3JlYXRlQ2FyZChjYXJkRGF0YSkge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXG4gICAgY2FyZERhdGEsIC8vdW5kZWZpbmVkIC0gZGF0YSB0byBiZSBhZGRlZCB0byBmb3JtP1xuICAgIHVzZXJJZCwgLy91bmRlZmluZWQgLSB3aGVyZSBpcyB0aGlzIGRhdGEgY29taW5nIGZyb20/XG4gICAgXCIjY2FyZC10ZW1wbGF0ZVwiLFxuICAgIC8vaGFuZGxlQ2FyZENsaWNrXG4gICAgKGNhcmROYW1lLCBjYXJkTGluaykgPT4ge1xuICAgICAgcHJldmlld1BvcHVwLm9wZW4oY2FyZE5hbWUsIGNhcmRMaW5rKTtcbiAgICB9LFxuICAgIC8vaGFuZGxlRGVsZXRlQ2xpY2tcbiAgICAoY2FyZElkKSA9PiB7XG4gICAgICBkZWxldGVDYXJkUG9wdXAub3BlbigpO1xuICAgICAgZGVsZXRlQ2FyZFBvcHVwLnNldFN1Ym1pdEFjdGlvbigoKSA9PiB7XG4gICAgICAgIGFwaS5kZWxldGVVc2VyQ2FyZChjYXJkSWQpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIGRlbGV0ZUNhcmRQb3B1cC5jbG9zZSgpO1xuICAgICAgICAgIGNhcmQuZGVsZXRlQ2FyZCgpO1xuICAgICAgICB9KTtcbiAgICAgIH0pOyAvL2NhbGxiYWNrZnVuY3Rpb24gdG8gZGVsZXRlIGNhcmQgY2xvc2UgcG9wdXAgYW5kcmVtb3ZlIGNhcmQgZWxlbWVudFxuICAgIH0sXG4gICAgLy9oYW5kbGVMaWtlQ2xpY2sgLSB0byBiZSBhZGRlZCB0byBDYXJkLmpzXG4gICAgKGNhcmRJZCkgPT4ge1xuICAgICAgaWYgKGNhcmQuY2FyZExpa2VkKCkpIHtcbiAgICAgICAgYXBpXG4gICAgICAgICAgLmFkZENhcmRMaWtlcyhjYXJkSWQpXG4gICAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgIGNhcmQuc2V0TGlrZXNDb3VudGVyKGRhdGEubGlrZXMpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhcGlcbiAgICAgICAgICAucmVtb3ZlQ2FyZExpa2VzKGNhcmRJZClcbiAgICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgY2FyZC5zZXRMaWtlc0NvdW50ZXIoZGF0YS5saWtlcyk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjYXJkO1xuICAgIH1cbiAgKTtcbiAgLy9jYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmQuZ2V0VmlldygpKTtcbn1cblxuY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIHJlbmRlcmVyOiAoY2FyZERhdGEpID0+IHtcbiAgICAgIGNvbnN0IG5ld0NhcmQgPSBjcmVhdGVDYXJkKGNhcmREYXRhKTtcbiAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0obmV3Q2FyZC5nZXRWaWV3KCkpO1xuICAgIH0sXG4gIH0sXG4gIFwiLmNhcmRzX19saXN0XCJcbik7XG5cbi8vUmVuZGVyIEluaXRpYWwgQ2FyZHMgPT4gdG8gYmUgcmVtb3ZlZCBmb3IgQVBJXG4vKmNvbnN0IGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXG4gIHtcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxuICAgIHJlbmRlcmVyOiAoY2FyZERhdGEpID0+IHtcbiAgICAgIGNvbnN0IGNhcmQgPSBjcmVhdGVDYXJkKGNhcmREYXRhKTtcbiAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZC5nZXRWaWV3KCkpO1xuICAgIH0sXG4gIH0sXG4gIFwiLmNhcmRzX19saXN0XCJcbik7XG5cbmNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7Ki9cblxuLy9BZGQgbmV3IGNhcmQgd2l0aCBhZGQgY2FyZCBmb3JtXG5jb25zdCBhZGRDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNjYXJkLWVkaXQtbW9kYWxcIiwgKHZhbHVlcykgPT4ge1xuICAvLzEuIHNldHVwIHRpbWVyIGJ1dHRvblxuICBhcGlcbiAgICAuYWRkTmV3Q2FyZCh2YWx1ZXMpXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIGNyZWF0ZUNhcmQoZGF0YSk7XG4gICAgICBhZGRDYXJkUG9wdXAuY2xvc2UoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIH0pO1xuICAvLzYuIGZpbmFsbHkgdHVybiBvZmYgdGltZXIgYnV0dG9uXG4gIC8vY29uc3QgbmV3Q2FyZCA9IGNyZWF0ZUNhcmQoY2FyZERhdGEpO1xuICAvL2NhcmRTZWN0aW9uLmFkZEl0ZW0obmV3Q2FyZC5nZXRWaWV3KCkpO1xufSk7XG5cbi8vT3BlbiBjYXJkIHBvcHVwIHdpdGggb3BlbiBhbmQgY2xpY2sgbGlzdGVuZXJcbmNhcmRFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBhZGRDYXJkUG9wdXAub3BlbigpKTtcblxuYWRkQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vR2V0IHVzZXIgaW5mb3JtYXRpb24gYW5kIGNhcmQgZGF0YSBmcm9tIHNlcnZlclxuYXBpLmdldEFQSUluZm8oKS50aGVuKChbY2FyZHMsIHVzZXJEYXRhXSkgPT4ge1xuICB1c2VySWQgPSB1c2VyRGF0YS5faWQ7IC8vYXNzaWduIC5faWQgdG8gdXNlcklkIHZhcmlhYmxlXG4gIGNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKGNhcmRzKSwgdXNlcmluZm8uc2V0VXNlckluZm8odXNlckRhdGEpOyAvL3NldCBtZXRob2RzIHRvIHJlbmRlciBjYXJkcyB1c2luZyBjYXJkIGRhdGEgZnJvbSBBUEksIGFuZCB1c2VyIGluZm8gZnJvbSBBUEkgdXNlcmRhdGFcbn0pO1xuIiwiLy8gUmVuZGVyIFVzZXIgaW5mbyBvbiB0aGUgcGFnZVxuXG5jbGFzcyBVc2VySW5mbyB7XG4gIC8vYWRkIGNvbnN0cnVjdG9yIC0gdGFrZSBpbiBvYmogLSBzZWxlY3RvcnMgb2YgdHdvIGVsZW1lbnRzXG4gIGNvbnN0cnVjdG9yKHsgdXNlck5hbWUsIHVzZXJKb2IsIHVzZXJBdmF0YXIgfSkge1xuICAgIHRoaXMuX3VzZXJOYW1lID0gdXNlck5hbWU7IC8vcHJvZmlsZSB0aXRsZVxuICAgIHRoaXMuX3VzZXJEZXNjcmlwdGlvbiA9IHVzZXJKb2I7IC8vcHJvZmlsZSBkZXNjcmlwdGlvblxuICAgIHRoaXMuX3VzZXJBdmF0YXIgPSB1c2VyQXZhdGFyO1xuICB9XG5cbiAgLy9yZXR1cm4gb2JqZWN0IHdpdGggaW5mbyBhYm91dCB1c2VyIC0+IG5lZWQgdG8gcmV0dXJuIHZhbHVlcyBmcm9tIHRoZXJlIGFscmVhZHlcbiAgLy9pbiBpbmRleC5qcywgdmFsdWUgZ2V0cyByZXR1cm5lZCB0byB2YXJpYWJsZVxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdGl0bGU6IHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50LFxuICAgICAgZGVzY3JpcHRpb246IHRoaXMuX3VzZXJEZXNjcmlwdGlvbi50ZXh0Q29udGVudCxcbiAgICAgIC8vYXZhdGFyOiB0aGlzLl91c2VyQXZhdGFyLnNyYyxcbiAgICB9O1xuICB9XG5cbiAgc2V0VXNlckluZm8odmFsdWUpIHtcbiAgICB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCA9IHZhbHVlLnRpdGxlO1xuICAgIHRoaXMuX3VzZXJEZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IHZhbHVlLmRlc2NyaXB0aW9uO1xuICAgIHRoaXMuX3VzZXJBdmF0YXIuc3JjID0gdmFsdWUuYXZhdGFyO1xuICAgIHRoaXMuX3VzZXJBdmF0YXIuYWx0ID0gdmFsdWUudGl0bGU7XG4gIH1cblxuICAvL25lZWQgdG8gZ2V0IGF2YXRhciBpbmZvIGZyb20gcmV0dXJuIHN0YXRlbWVudCAtIGhvdyB0byBkbyB0aGlzXG4gIC8qc2V0VXNlckltYWdlKHZhbHVlKSB7XG4gICAgdGhpcy5fdXNlckF2YXRhci5zcmMgPSB2YWx1ZS5hdmF0YXI7XG4gICAgdGhpcy5fdXNlckF2YXRhci5hbHQgPSB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudDtcbiAgfSAvL05vIGF2YXRhciBkYXRhIGNhbGxlZCovXG59XG5cbmV4cG9ydCBkZWZhdWx0IFVzZXJJbmZvO1xuIiwiLy9DaGlsZCBvZiBQb3B1cFxuLy9DaGFuZ2VzIHBhcmVudCBvcGVuIG1ldGhvZCB0byBhZGQgaW1hZ2UgdG8gcG9wdXAgd2l0aCBzcmMgYW5kIGNhcHRpb25cbmltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5jbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIC8vaW5zdGFudGlhdGUgcGFyZW50IGNvbnN0cnVjdG9yIGFuZCBnZXQgYWNjZXNzIHRvIHBvcHVwZWxlbWVudCBmcm9tIHBhcmVudFxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgICAvL3NldCBuYW1lIGFuZCBsaW5rIHByb3BlcnRpZXMgZnJvbSBwb3B1cFByZXZpZXcgdG8gYXNzaWduIHZhbHVlcyB3aXRoIG9wZW5cbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLnByZXZpZXctbW9kYWxfX2ltYWdlXCJcbiAgICApO1xuICAgIHRoaXMuX3ByZXZpZXdOYW1lID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5wcmV2aWV3LW1vZGFsX19jYXB0aW9uXCJcbiAgICApO1xuICB9XG4gIG9wZW4obmFtZSwgbGluaykge1xuICAgIHRoaXMuX3ByZXZpZXdJbWFnZS5zcmMgPSBsaW5rO1xuICAgIHRoaXMuX3ByZXZpZXdJbWFnZS5hbHQgPSBuYW1lO1xuICAgIHRoaXMuX3ByZXZpZXdOYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICBzdXBlci5vcGVuKCk7IC8vcGFyZW50IG9wZW4gbWV0aG9kIGNhbGxlZFxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEltYWdlO1xuIiwiLy9IYW5kbGVzIFllcyBzdWJtaXQgb24gZGVsZXRlIGNvbmZpcm0gcG9wdXBcbmltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5jbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7IC8vU2VsZWN0IGZvcm0gY2xhc3MgZm9yIGRlbGV0ZSBmb3JtXG4gICAgLy90aGlzLl9jb25maXJtQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNkZWxldGUtY29uZmlybS1idXR0b25cIik7IC8vWWVzIGJ1dHRvbiBpbiBmb3JtIGZvciBkZWxldGUgY2hlY2tcbiAgfVxuXG4gIC8vU2V0IGZ1bmN0aW9uIGZvciBzdWJtaXQgYWN0aW9uXG4gIHNldFN1Ym1pdEFjdGlvbihhY3Rpb24pIHtcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXQgPSBhY3Rpb247XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpOyAvL3NldCBwYXJlbnQgZXZlbnQgbGlzdGVuZXJzXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVTdWJtaXQoKTsgLy9jYWxsYmFjayBmdW5jdGlvbiB0byBiZSBzZXRcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhDb25maXJtYXRpb247XG4iLCIvL1NlY3Rpb24gY2xhc3MgcmVuZGVycyBsaXN0IG9mIGVsZW1lbnRzIG9uIHBhZ2VcbmNsYXNzIFNlY3Rpb24ge1xuICAvL2FkZCBjb25zdHJ1Y3RvclxuICBjb25zdHJ1Y3Rvcih7IHJlbmRlcmVyIH0sIGNsYXNzU2VsZWN0b3IpIHtcbiAgICAvL3RoaXMuX2l0ZW1zQXJyYXkgPSBpdGVtczsgLy9kYXRhIGFycmF5XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjsgLy9mdW5jdGlvbiB0byBjcmVhdGUvcmVuZGVyIGRhdGEgb24gcGFnZVxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY2xhc3NTZWxlY3Rvcik7IC8vQ1NTIHNlbGVjdG9yIGZvciB3aGVyZSB0byBlbWJlZCBpdGVtXG4gIH1cblxuICAvL21ldGhvZCB0byByZW5kZXIgYWxsIGVsZW1lbnRzIG9uIHBhZ2VcbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgY2FyZHMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7IC8vcmVuZGVyZXIgZnVtY3Rpb24gcmVuZGVycyBlYWNoIGVsZW1lbnQgb24gcGFnZVxuICAgIH0pO1xuICB9XG5cbiAgLy9tZXRob2QgdG8gdGFrZSBET00gZWxlbWVudCBhbmQgYWRkIHRvIGNvbnRhaW5lclxuICBhZGRJdGVtKGl0ZW0pIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChpdGVtKTsgLy9hcHBlbmQgZWxlbWVudCB0byBwYWdlXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU2VjdGlvbjtcbiJdLCJuYW1lcyI6WyJjb25zdHJ1Y3RvciIsImRhdGEiLCJ1c2VySWQiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVEZWxldGVDbGljayIsImhhbmRsZUxpa2VDbGljayIsInRoaXMiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfaWQiLCJfbGlrZXMiLCJsaWtlcyIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZURlbGV0ZUNsaWNrIiwiX2hhbmRsZUxpa2VDbGljayIsIl91c2VySWQiLCJfdXNlckNhcmRPd25lcklkIiwiX2dldFRlbXBsYXRlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9zZXRDYXJkRXZlbnRMaXN0ZW5lcnMiLCJfbGlrZUJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJfZGVsZXRlQnV0dG9uIiwiX2NhcmRJbWFnZSIsIl9oYW5kbGVDYXJkUHJldmlldyIsIl9oYW5kbGVDYXJkTGlrZSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImRlbGV0ZUNhcmQiLCJfY2FyZEVsZW1lbnQiLCJyZW1vdmUiLCJjYXJkTGlrZWQiLCJzb21lIiwibGlrZSIsIl9zZXRMaWtlQnV0dG9uU3RhdGUiLCJfY2FyZExpa2VzIiwidGV4dENvbnRlbnQiLCJsZW5ndGgiLCJhZGQiLCJzZXRMaWtlc0NvdW50ZXIiLCJnZXRWaWV3Iiwic3JjIiwiYWx0IiwiX3ByZXZpZXdCdXR0b24iLCJjb25maWciLCJmb3JtRWxlbWVudCIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JFbGVtZW50IiwiaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hhc0ludmFsaWRJbnB1dCIsIl9pbnB1dEVsZW1lbnRzIiwiZXZlcnkiLCJfZW5hYmxlU3VibWl0QnV0dG9uIiwiX2J1dHRvbkVsZW1lbnQiLCJkaXNhYmxlZCIsIl9kaXNhYmxlU3VibWl0QnV0dG9uIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwic2V0VGltZW91dCIsImZvckVhY2giLCJlbmFibGVWYWxpZGF0aW9uIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJfcmVmIiwicG9wdXBTZWxlY3RvciIsInRhcmdldCIsImNvbnRhaW5zIiwiY2xvc2UiLCJfcG9wdXBFbGVtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIm9wZW4iLCJfaGFuZGxlT3ZlcmxheUNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwiUG9wdXAiLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfcG9wdXBGb3JtIiwiX2lucHV0TGlzdCIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2dldElucHV0VmFsdWVzIiwiX2Zvcm1WYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwicmVzZXQiLCJmb3JtU2VsZWN0b3IiLCJwcm9maWxlRWRpdEJ1dHRvbiIsInByb2ZpbGVFZGl0TW9kYWwiLCJwcm9maWxlTmFtZSIsInByb2ZpbGVEZXNjcmlwdGlvbiIsIm1vZGFsSW5wdXROYW1lRmllbGQiLCJtb2RhbElucHV0RGVzY3JpcHRpb25GaWVsZCIsImNhcmRFZGl0TW9kYWwiLCJjYXJkRWRpdEJ1dHRvbiIsImF2YXRhckVkaXRNb2RhbCIsInByb2ZpbGVBdmF0YXIiLCJhdmF0YXJCdXR0b24iLCJhcGkiLCJiYXNlVXJsIiwiaGVhZGVycyIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJfY2hlY2tSZXNwb25zZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJnZXRVc2VySW5mbyIsImZldGNoIiwibWV0aG9kIiwidGhlbiIsImdldEluaXRpYWxDYXJkcyIsImdldEFQSUluZm8iLCJhbGwiLCJ1cGRhdGVQcm9maWxlSW5mbyIsImFib3V0IiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhZGROZXdDYXJkIiwiZGVsZXRlVXNlckNhcmQiLCJjYXJkSWQiLCJhZGRDYXJkTGlrZXMiLCJyZW1vdmVDYXJkTGlrZXMiLCJ1cGRhdGVQcm9maWxlQXZhdGFyIiwiYXZhdGFyIiwiYXV0aG9yaXphdGlvbiIsImVkaXRGb3JtVmFsaWRhdG9yIiwiRm9ybVZhbGlkYXRvciIsImFkZEZvcm1WYWxpZGF0b3IiLCJhdmF0YXJGb3JtVmFsaWRhdG9yIiwidXNlcmluZm8iLCJ1c2VyTmFtZSIsInVzZXJKb2IiLCJ1c2VyQXZhdGFyIiwiX3VzZXJOYW1lIiwiX3VzZXJEZXNjcmlwdGlvbiIsIl91c2VyQXZhdGFyIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsInNldFVzZXJJbmZvIiwicHJvZmlsZVBvcHVwIiwiUG9wdXBXaXRoRm9ybSIsInZhbHVlcyIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImF2YXRhclBvcHVwIiwicHJldmlld1BvcHVwIiwiX3ByZXZpZXdJbWFnZSIsIl9wcmV2aWV3TmFtZSIsImRlbGV0ZUNhcmRQb3B1cCIsInNldFN1Ym1pdEFjdGlvbiIsImFjdGlvbiIsIl9oYW5kbGVTdWJtaXQiLCJjcmVhdGVDYXJkIiwiY2FyZERhdGEiLCJjYXJkIiwiQ2FyZCIsImNhcmROYW1lIiwiY2FyZExpbmsiLCJjYXJkU2VjdGlvbiIsImNsYXNzU2VsZWN0b3IiLCJyZW5kZXJlciIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsImNhcmRzIiwiaXRlbSIsImFkZEl0ZW0iLCJwcmVwZW5kIiwibmV3Q2FyZCIsImFkZENhcmRQb3B1cCIsInVzZXJEYXRhIl0sInNvdXJjZVJvb3QiOiIifQ==