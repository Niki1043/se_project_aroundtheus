!function(){"use strict";var e=class{constructor(e,t,s,r,i,n,o){this._name=e.name,this._link=e.link,this._id=e._id,this._likes=e.likes,this._cardSelector=s,this._handleCardClick=r,this._handleDeleteClick=i,this._handleLikeClick=n,this._loadingLikeCheck=o,this._userId=t,this._userCardOwnerId=e.owner._id}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setCardEventListeners(){this._likeButton.addEventListener("click",(()=>{this._handleLikeClick(this._id)})),this._deleteButton.addEventListener("click",(()=>{this._handleDeleteClick(this._id)})),this._cardImage.addEventListener("click",(()=>{this._handleCardPreview()}))}_handleCardLike(){this._likeButton.classList.toggle("card__like-button_active")}_handleCardPreview(){this._handleCardClick(this._name,this._link)}deleteCard(){this._cardElement.remove(),this._cardElement=null}setLikesCounter(e){this._likes=e,this._cardLikes.textContent=e}addCardLike(){this._likeButton.classList.add("card__like-button_active")}removeCardLike(){this._likeButton.classList.remove("card__like-button_active")}checkCardLikedState(){return!!this._likeButton.classList.contains("card__like-button_active")}getView(){return this._cardElement=this._getTemplate(),this._cardElement.querySelector(".card__name").textContent=this._name,this._cardImage=this._cardElement.querySelector(".card__image"),this._cardImage.src=this._link,this._cardImage.alt=this._name,this._likeButton=this._cardElement.querySelector(".card__like-button"),this._deleteButton=this._cardElement.querySelector(".card__delete-button"),this._previewButton=this._cardElement.querySelector("#preview-button"),this._cardLikes=this._cardElement.querySelector(".card__likes-counter"),this._loadingLikeCheck(this._likes,this._likeButton),this._cardLikes.textContent=this._likes.length,this._userId!=this._userCardOwnerId&&this._deleteButton.remove(),this._setCardEventListeners(),this._cardElement}},t=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasInvalidInput(){return!this._inputElements.every((e=>e.validity.valid))}_enableSubmitButton(){this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1}_disableSubmitButton(){this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0}toggleButtonState(){this._hasInvalidInput(this._inputElements)?this._disableSubmitButton():this._enableSubmitButton()}_setEventListeners(){this._inputElements=[...this._form.querySelectorAll(this._inputSelector)],this._buttonElement=this._form.querySelector(this._submitButtonSelector),this.toggleButtonState(),this._form.addEventListener("reset",(()=>{setTimeout((()=>{this.toggleButtonState()}),0)})),this._inputElements.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}};var s=class{constructor(e){let{popupSelector:t}=e;var s,r,i;s=this,i=e=>{(e.target.classList.contains("modal_opened")||e.target.classList.contains("modal__close"))&&this.close()},(r=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(r="_handleOverlayClose"))in s?Object.defineProperty(s,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):s[r]=i,this._popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose),document.addEventListener("mousedown",this._handleOverlayClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose),document.removeEventListener("mousedown",this._handleOverlayClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popupElement.addEventListener("click",this.close())}},r=class extends s{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._inputList=this._popupForm.querySelectorAll(".modal__input"),this._saveButton=this._popupForm.querySelector(".modal__button"),this._handleFormSubmit=t}isLoadingButtonState(e,t){this._saveButton.textContent=e?"Saving...":t}_getInputValues(){return this._formValues={},this._inputList.forEach((e=>{this._formValues[e.name]=e.value})),this._formValues}setEventListeners(){super.setEventListeners(),this._popupElement.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this.close(),this._popupForm.reset()}))}close(){super.close()}};const i={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__error_input_type",errorClass:"modal__error_visible"},n=document.querySelector(".profile__edit-button"),o=document.querySelector("#profile-edit-modal"),a=document.querySelector(".profile__title"),l=document.querySelector(".profile__description"),d=document.querySelector("#modal-name"),c=document.querySelector("#modal-description"),h=document.querySelector("#card-edit-modal"),u=document.querySelector(".profile__add-button"),_=document.querySelector("#profileimage-edit-modal"),m=document.querySelector(".profile__avatar"),p=document.querySelector(".profile__avatar-edit"),v=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error ${e.status}`)}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{method:"GET",headers:this._headers}).then(this._checkResponse)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{method:"GET",headers:this._headers}).then(this._checkResponse)}getAPIInfo(){return Promise.all([this.getUserInfo(),this.getInitialCards()])}updateProfileInfo(e){return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then(this._checkResponse)}addNewCard(e){return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then(this._checkResponse)}deleteUserCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}addCardLikes(e){return fetch(`${this._baseUrl}/cards/likes/${e}`,{method:"PUT",headers:this._headers}).then(this._checkResponse)}removeCardLikes(e){return fetch(`${this._baseUrl}/cards/likes/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}updateProfileAvatar(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._checkResponse)}}({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"871cfd79-24b1-469e-9aa3-4e4a6ff58fdc","Content-Type":"application/json"}}),E=new t(i,o),f=new t(i,h),k=new t(i,_);k.enableValidation(),E.enableValidation(),f.enableValidation(),k.enableValidation();const S=new class{constructor(e){let{userName:t,userJob:s,userAvatar:r}=e;this._userName=t,this._userDescription=s,this._userAvatar=r}getUserInfo(){return{name:this._userName.textContent,about:this._userDescription.textContent,avatar:this._userAvatar}}setUserInfo(e){this._userName.textContent=e.name,this._userDescription.textContent=e.about,this._userAvatar.src=e.avatar,this._userAvatar.alt=e.name}}({userName:a,userJob:l,userAvatar:m});n.addEventListener("click",(function(){const{name:e,about:t}=S.getUserInfo();d.value=e,c.value=t,C.open()}));const C=new r("#profile-edit-modal",(e=>{C.isLoadingButtonState(!0),v.updateProfileInfo(e).then((e=>{S.setUserInfo(e),C.close()})).catch((e=>{console.log(e)})).finally((()=>{C.isLoadingButtonState(!1,"Save")}))}));C.setEventListeners();const b=new r("#profileimage-edit-modal",(e=>{b.isLoadingButtonState(!0),v.updateProfileAvatar(e.avatar).then((e=>{S.setUserInfo(e),b.close()})).catch((e=>{console.log(e)})).finally((()=>{b.isLoadingButtonState(!1,"Save")}))}));p.addEventListener("click",(()=>b.open())),b.setEventListeners();const L=new class extends s{constructor(e){super({popupSelector:e}),this._previewImage=this._popupElement.querySelector(".preview-modal__image"),this._previewName=this._popupElement.querySelector(".preview-modal__caption")}open(e,t){this._previewImage.src=t,this._previewImage.alt=e,this._previewName.textContent=e,super.open()}}("#preview-modal"),g=new class extends s{constructor(e){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._confirmButton=document.querySelector("#delete-confirm-button")}setSubmitAction(e){this._handleSubmit=e}setEventListeners(){super.setEventListeners(),this._confirmButton.addEventListener("click",(e=>{e.preventDefault(),this._handleSubmit()}))}}("#delete-confirm-modal");let y,I;function w(t){const s=new e(t,I,"#card-template",((e,t)=>{L.open(e,t)}),(e=>{g.open(),g.setSubmitAction((()=>{v.deleteUserCard(e).then((()=>{s.deleteCard(),g.close()}))}))}),(e=>{s.checkCardLikedState()?v.removeCardLikes(e).then((e=>{s.removeCardLike(),s.setLikesCounter(e.likes.length)})).catch((e=>{console.log(e)})):v.addCardLikes(e).then((e=>{s.addCardLike(),s.setLikesCounter(e.likes.length)})).catch((e=>{console.log(e)}))}),(e=>{e.forEach((e=>{e._id===I&&s.addCardLike()}))}));return s}g.setEventListeners(),v.getAPIInfo().then((e=>{let[t,s]=e;I=t._id,S.setUserInfo(t),y=new class{constructor(e,t){let{items:s,renderer:r}=e;this._items=s,this._renderer=r,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:s,renderer:e=>{const t=w(e);y.addItem(t.getView())}},".cards__list"),y.renderItems()}));const B=new r("#card-edit-modal",(e=>{B.isLoadingButtonState(!0),v.addNewCard(e).then((e=>{const t=w(e);B.close(),y.addItem(t.getView())})).catch((e=>{console.log(e)})).finally((()=>{B.isLoadingButtonState(!1,"Create")})),y.renderItems()}));u.addEventListener("click",(()=>B.open())),B.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Iiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy9hdXRob3JpemF0aW9uIHRva2VuOiA4NzFjZmQ3OS0yNGIxLTQ2OWUtOWFhMy00ZTRhNmZmNThmZGNcbi8vZ3JvdXBJRDogZ3JvdXAtMTJcblxuLy9DcmVhdGUgYSBjbGFzcyBmb3IgQXBpXG4vL0NvbnRhaW5zIG1ldGhvZHMgZm9yIGFsbCB0aGUgcmVxdWVzdHMgdG8gYmUgbWFkZVxuLy9BbGwgcmVxdWVzdHMgbWFkZSBmcm9tIHRoaXMgY2xhc3Ncbi8vQWxsIHJlcXVlc3RzIHNob3VsZCBiZSBtZXRob2RzIG9mIHRoaXMgY2xhc3Ncbi8vQ29uc3RydWN0b3JzIGZvciB0aGUgYXBpIGNvbnN0IGNhbGxlZCBpbiBpbmRleC5qc1xuY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDsgLy9iYXNldXJsIGh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXBJZFxuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xuICB9XG4gIC8vY2hlY2tSZXNwb25zZSgpIC0+IENoZWNrIHJlc3BvbnNlcyBhbmQgZm9yIGVycm9ycyAtIGdlbmVyYWwgY2hlY2t0byBiZSBhZGRlZCB0byBhbGwgbWV0aG9kcyB0byBoYW5kbGUgZXJyb3JzL2NvbnRpbnVlIHdpdGggdGhlbiBzdGF0ZW1lbnRzXG4gIC8vQ2hlY2sgcmVzcG9uc2UgZnJvbSBlYWNoIGZldGNoIHJlcXVlc3QgZm9yIHJlc3BvbnNlIGFuZCBwYXJzZSBmcm9tIEpTT04gb2JqIGZvciBwcm9taXNlIG9yIGZvciBzZXJ2ZXIgZXJyb3IgdG8gZGVjaWRlIG5leHQgc3RlcCB3aXRoIHByb21pc2VcbiAgX2NoZWNrUmVzcG9uc2UocmVzKSB7XG4gICAgaWYgKHJlcy5vaykge1xuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3IgJHtyZXMuc3RhdHVzfWApO1xuICB9XG4gIC8vZ2V0VXNlckluZm8oKSAtPiByZXR1cm5zIG5hbWUsIGFib3V0LCBhdmF0YXIsX2lkLCBjb2hvcnRcbiAgLy9zZXQgdXJsIHRvIGZldGNoIGZyb20gdXJsIG9mIHJlcXVlc3RlZCByZXNvdWNlLCBhbmQgb3B0aW9ucyBvYmplY3Qgdy9tZXRob2QgYW5kIGhlYWRlcnMsIHRoZW4gY2hlY2sgc2VydmVyIHJlc3BvbnNlIHRvIHJlcXVlc3Qgdy9lcnJvciBwcm9taXNlXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuICAvL2dldEluaXRpYWxDYXJkcygpIC0+IHJldHVybnMgbmFtZSxsaW5rLCBfaWQsbGlrZXNcbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuICAvL2dldEFQSUluZm8gLT4gY2FyZHMgcmVuZGVyZWQgYWZ0ZXIgdXNlciBpbmZvIHJlY2VpdmVkIGZyb20gc2VydmVyIHcvUHJvbWlzZS5hbGwoKVxuICBnZXRBUElJbmZvKCkge1xuICAgIHJldHVybiBQcm9taXNlLmFsbChbdGhpcy5nZXRVc2VySW5mbygpLCB0aGlzLmdldEluaXRpYWxDYXJkcygpXSk7XG4gIH1cbiAgLy91cGRhdGVQcm9maWxlSW5mbyhuYW1lLGFib3V0KSAtPiBib2R5Om5hbWUsYWJvdXQgKHNwZWNpZmljYWxseSBmb3IgbmFtZSBhbmQgYWJvdXQgaW4gc3RyaW5nIGZvcm1hdClcbiAgdXBkYXRlUHJvZmlsZUluZm8odXNlckRhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh1c2VyRGF0YSksXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuICAvL2FkZE5ld0NhcmQobmFtZSxsaW5rKSAtPiBib2R5Om5hbWUsbGluayhzcGVjaWZpY2FsbHkgZm9yIG5hbWUgYW5kIGxpbmsgaW4gc3RyaW5nIGZvcm1hdClcbiAgYWRkTmV3Q2FyZChjYXJkRGF0YSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoY2FyZERhdGEpLFxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cbiAgLy9kZWxldGVVc2VyQ2FyZChjYXJkSWQpIC0+ICBfaWQgYWRkZWQgdG8gVVJMIGluIHJlcXVlc3RcbiAgZGVsZXRlVXNlckNhcmQoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuICAvL2FkZENhcmRMaWtlcyhjYXJkSWQpLT5faWQgYWRkZWQgdG8gVVJMIGluIHJlcXVlc3RcbiAgYWRkQ2FyZExpa2VzKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cbiAgLy9yZW1vdmVDYXJkTGlrZXMoY2FyZElkKS0+X2lkIGFkZGVkIHRvIFVSTCBpbiByZXF1ZXN0XG4gIHJlbW92ZUNhcmRMaWtlcyhjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG4gIC8vdXBkYXRlUHJvZmlsZUF2YXRhcihhdmF0YXIpIC0+IGJvZHk6YXZhdGFyIChzcGVjaWZpY2FsbHkgZm9yIGF2YXRhciBpbiBzdHJpbmcgZm9ybWF0KVxuICB1cGRhdGVQcm9maWxlQXZhdGFyKGF2YXRhcikge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGF2YXRhciB9KSxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEFwaTtcblxuLy8vL0hUTUxfQ1NTL2luZGV4LmpzXG4vLy9hZGQgZ2V0IGFwcCBpbmZvIG1ldGhvZCBpbnRvIGluZGV4LmpzIHRvIGdldCB1c2VySWQgYW5kIGFzc2lnbiBmb3IgdXNlIGluIEpTIGNvZGUgYW5kIHRvIHJlbmRlciBjYXJkcyBvbiBvcGVuaW5nXG4vLy8vR2V0IGxpa2VzIGRhdGEgZnJvbSBDYXJkc2RhdGFhcnJheSB0byBzaG93IG9uIHBhZ2VzXG4vLy8vQWRkIGxpa2VzIGNvdW50IGZvcm1hdCB1bmRlciBsaWtlIGJ1dHRvbiAtIGRhdGEgY2hhbmdlcyBsaW5rZWQgdG8gc2VydmVyXG4vLy8vVVggc2F2aW5nIGJ1dHRvbiB3aGlsZSBsb2FkaW5nIC0gc2V0IHRpbWVyL3dpdGggQVBJIHJlcXVlc3QgdG9vXG5cbi8vLy8vL0RPTkUgU08gRkFSXG4vLy9BZGQgUG9wdXAgZm9ybSBhZnRlciBkZWxldGUgYnV0dG9uIGNsaWNrIC0gaHRtbCBtb2RhbCArIGluZGV4LmpzIGNhbGxzXG4vLy9CRUZPUkUgQVBJXG4vLy8vLy9Db2RlIHNvIGJpbiBpcyBvbmx5IG9uIHVzZXIncyBjYXJkIC0gcHJldmVudCBvdGhlciB1c2VycyB0byBkZWxldGUgb3RoZXIgdXNlcidzIGNhcmRcbi8vLy9Qcm9maWxlIHBpYyBob3ZlciBlZGl0IGJ1dHRvblxuLy8vL1Byb2ZpbGUgcGljIHBvcHVwZm9ybVxuIiwiLy9BREQgdXNlcklkIGFmdGVyIGRhdGEgaW4gY29uc3RydWN0b3IsIHVuY29tbWVudFxuXG5jbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoXG4gICAgZGF0YSxcbiAgICB1c2VySWQsXG4gICAgY2FyZFNlbGVjdG9yLFxuICAgIGhhbmRsZUNhcmRDbGljayxcbiAgICBoYW5kbGVEZWxldGVDbGljayxcbiAgICBoYW5kbGVMaWtlQ2xpY2ssXG4gICAgbG9hZGluZ0xpa2VDaGVja1xuICApIHtcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5faWQgPSBkYXRhLl9pZDtcbiAgICB0aGlzLl9saWtlcyA9IGRhdGEubGlrZXM7XG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljazsgLy9hZGQgbWV0aG9kIHRvIGNvbnN0cnVjdG9yXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sgPSBoYW5kbGVEZWxldGVDbGljaztcbiAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sgPSBoYW5kbGVMaWtlQ2xpY2s7XG4gICAgdGhpcy5fbG9hZGluZ0xpa2VDaGVjayA9IGxvYWRpbmdMaWtlQ2hlY2s7IC8vYWRkIHRvIHBsYWNlIGNhbGwgYmFjayBpbiBjcmVhdGUgY2FyZCB0byByZW5kZXIgbGlrZXMgZnJvbSBzZXJ2ZXIgb24gbG9hZGluZ1xuICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcbiAgICB0aGlzLl91c2VyQ2FyZE93bmVySWQgPSBkYXRhW1wib3duZXJcIl0uX2lkO1xuICB9XG5cbiAgLy9BZGQgbWV0aG9kcyBmb3IgY2FyZHMgaGVyZVxuICAvL19nZXRUZW1wbGF0ZSgpIGZyb20gY2FyZFNlbGVjdG9yIHdpdGggY2xvbmUgdG8gY3JlYXRlIHRlbXBsYXRlXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xuICB9XG5cbiAgLy9fc2V0Q2FyZEV2ZW50TGlzdGVuZXJzIGZvciBjbGljayBldmVudHMgd2hhdCBhcmUgdGhleSBmb3JcbiAgX3NldENhcmRFdmVudExpc3RlbmVycygpIHtcbiAgICAvL0xpa2VcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sodGhpcy5faWQpO1xuICAgIH0pO1xuXG4gICAgLy9EZWxldGVcbiAgICB0aGlzLl9kZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrKHRoaXMuX2lkKTtcbiAgICB9KTtcbiAgICAvL1ByZXZpZXdcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRQcmV2aWV3KCk7XG4gICAgfSk7XG4gIH1cblxuICAvL19oYW5kbGVFdmVudHMoKSBzZXQgZXZlbnQgaGFuZGxlcnNcbiAgX2hhbmRsZUNhcmRMaWtlKCkge1xuICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgfVxuXG4gIF9oYW5kbGVDYXJkUHJldmlldygpIHtcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5fbmFtZSwgdGhpcy5fbGluayk7XG4gIH1cblxuICBkZWxldGVDYXJkKCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcbiAgfVxuXG4gIC8vU2V0dXAgYSBjbGljayBoYW5kbGVyIGZvciBsb2FkaW5nIGxpa2VzIHdoZW4gbG9hZGluZyB0aGUgcGFnZVxuICBzZXRMaWtlc0NvdW50ZXIobGlrZXMpIHtcbiAgICB0aGlzLl9saWtlcyA9IGxpa2VzO1xuICAgIHRoaXMuX2NhcmRMaWtlcy50ZXh0Q29udGVudCA9IGxpa2VzO1xuICB9XG5cbiAgYWRkQ2FyZExpa2UoKSB7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICB9XG5cbiAgcmVtb3ZlQ2FyZExpa2UoKSB7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICB9XG5cbiAgY2hlY2tDYXJkTGlrZWRTdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIikpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLy9hZGQgZWxlbWVudHMgYW5kIGZ1bmN0aW9uYWxpdHkgdG8gY2FyZFxuICBnZXRWaWV3KCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICAvL2dlbmVyYXRlcyBjYXJkIG5hbWUsIGltYWdlIHNyYyBhbmQgYWx0XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19uYW1lXCIpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xuICAgIC8vZW5hYmxlcyBjbGlja0hhbmRsZXIgZnVuY3Rpb25zXG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIlxuICAgICk7XG4gICAgdGhpcy5fcHJldmlld0J1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1idXR0b25cIik7XG4gICAgLy9MaWtlIENvdW50ZXIgYW5kIGFkZGluZy9yZW1vdmluZyBsaWtlc1xuICAgIHRoaXMuX2NhcmRMaWtlcyA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZXMtY291bnRlclwiKTtcbiAgICB0aGlzLl9sb2FkaW5nTGlrZUNoZWNrKHRoaXMuX2xpa2VzLCB0aGlzLl9saWtlQnV0dG9uKTtcbiAgICB0aGlzLl9jYXJkTGlrZXMudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7IC8vcmV0dXJuIGxlbmd0aCBvZiBhcnJheSB3aXRoIGNvdW50IG9mIGxpa2VzXG4gICAgLy9JZiB0aGUgdXNlciBoYXMgbm90IGFkZGVkIHRoZSBjYXJkLCByZW1vdmUgdGhlIGRlbGV0ZSBidXR0b24gb24gdGhlIGNhcmRcbiAgICBpZiAodGhpcy5fdXNlcklkICE9IHRoaXMuX3VzZXJDYXJkT3duZXJJZCkge1xuICAgICAgdGhpcy5fZGVsZXRlQnV0dG9uLnJlbW92ZSgpO1xuICAgIH1cbiAgICB0aGlzLl9zZXRDYXJkRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2FyZDtcbiIsImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnQ7XG4gIH1cblxuICAvL0FkZCBNZXRob2RzXG4gIC8vU2hvdyBFcnJvciBGdW5jdGlvbiB3aXRoIFZhbGlkYXRpb24gTWVzc2FnZVxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cblxuICAvL0hpZGUgRXJyb3IgRnVuY3Rpb24gYW5kIHJlbW92ZVZhbGlkYXRpb24gTWVzc2FnZVxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgLy9DaGVjayBpbnB1dCBlbGVtZW50IHZhbGlkaXR5IC0+IGlmIHJldHVybnMgZmFsc2UsIHNob3cgaW5wdXQgZXJyb3JcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH1cbiAgLy8vL1xuXG4gIC8vaXMgSW5wdXQgdmFsaWQ6IGlucHV0IGxpc3QgaXMgZnJvbSBpbnB1dEVsZW1lbnRzXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuICF0aGlzLl9pbnB1dEVsZW1lbnRzLmV2ZXJ5KFxuICAgICAgKGlucHV0RWxlbWVudCkgPT4gaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkXG4gICAgKTtcbiAgfVxuICAvLy8vXG4gIC8vRW5hYmxlIEJ1dHRvblxuICBfZW5hYmxlU3VibWl0QnV0dG9uKCkge1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gIH1cbiAgLy8vL1xuXG4gIC8vRGlzYWJsZSBCdXR0b25cbiAgX2Rpc2FibGVTdWJtaXRCdXR0b24oKSB7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICB9XG4gIC8vLy9cblxuICAvLy8vXG4gIC8vdG9nZ2xlIGJ1dHRvbiBzdGF0ZVxuICB0b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KHRoaXMuX2lucHV0RWxlbWVudHMpKSB7XG4gICAgICB0aGlzLl9kaXNhYmxlU3VibWl0QnV0dG9uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2VuYWJsZVN1Ym1pdEJ1dHRvbigpO1xuICAgIH1cbiAgfVxuICAvLy8vXG4gIC8vLy9cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMgPSBbLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgICAvLyBoZXJlIHlvdSBkaXNhYmxlIHRoZSBidXR0b24gd2hlbiB5b3Ugc3RhcnQgdGhlIHByb2plY3RcbiAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgLy8gaGVyZSB5b3UgYWRkIHRoZSBgcmVzZXRgIGhhbmRsZXJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNldFwiLCAoKSA9PiB7XG4gICAgICAvLyBgc2V0VGltZW91dGAgaXMgbmVlZGVkIHRvIHdhaXQgdGlsbCB0aGUgZm9ybSBpcyBmdWxseSByZXNldCBhbmQgdGhlbiBjYWxsIGB0b2dnbGVCdXR0b25TdGF0ZWBcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9LCAwKTsgLy8gaXTigJlzIGVub3VnaCB0byBwdXQgMCBtcyBoZXJlXG4gICAgfSk7XG4gICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvLyBlbmFibGVWYWxpZGF0aW9uXG4gIC8vR2V0IGFuZCBsb29wIHRocm91Z2ggZm9ybUVsZW1lbnRcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xuIiwiLy9Qb3B1cCBjbGFzcyBvcGVucyBhbmQgY2xvc2VzIHBvcHVwIHdpbmRvd1xuY2xhc3MgUG9wdXAge1xuICAvL2FkZCBjb25zdHJ1Y3RvciAtIDFwYXJhbSA9IHBvcHVwIHNlbGVjdG9yXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTsgLy9DU1Mgc2VsZWN0b3IgcG9wdXAgLXByZXZpZXcvcHJvZmlsZS9jYXJkZWRpdFxuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgfVxuXG4gIC8vcHVibGljIG9wZW4gbWV0aG9kXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5faGFuZGxlT3ZlcmxheUNsb3NlKTtcbiAgfVxuXG4gIC8vcHVibGljIGNsb3NlIG1ldGhvZFxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9oYW5kbGVPdmVybGF5Q2xvc2UpO1xuICB9XG5cbiAgLy9zdG9yZSBsb2dpYyBmb3IgY2xvc2luZyBwb3B1cCB3aXRoIEVzYyBrZXlcbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgLy9hZGQgY2xvc2Ugd2l0aCBvdmVybGF5IGZ1bmN0aW9uXG4gIF9oYW5kbGVPdmVybGF5Q2xvc2UgPSAoZXZ0KSA9PiB7XG4gICAgaWYgKFxuICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9vcGVuZWRcIikgfHxcbiAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfX2Nsb3NlXCIpXG4gICAgKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9O1xuXG4gIC8vU2V0IEV2ZW50IExpc3RlbmVycyBmb3IgWCBpY29uIGFuZCBvdmVybGF5IGNsaWNrIGFuZCBFc2NcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgLy9jbG9zZSB3aXRoIGljb24gY2xpY2sgYW5kIHdpdGggRXNjIGFuZCBvdmVybGF5IGNsaWNrXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmNsb3NlKCkpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvcHVwO1xuIiwiLy9DaGlsZCBvZiBQb3B1cFxuLy9DaGFuZ2VzIHBhcmVudCB0byB1cGRhdGUgZm9ybXNcbmltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5jbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpOyAvL1NlbGVjdCBmb3JtIGNsYXNzXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpOyAvL2dldCBhbGwgaW5wdXQgZmllbGQgY2xhc3NlcyBmcm9tIGZvcm1zXG4gICAgdGhpcy5fc2F2ZUJ1dHRvbiA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19idXR0b25cIik7IC8vZ2V0IGFsbCBzYXZlIGJ1dHRvbiBmaWVsZCBjbGFzc2VzIGZyb20gZm9ybXNcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgfVxuXG4gIC8vU2V0IEJvb2xlYW4gZm9yIHNhdmUgYnV0dG9uIHN0YXR1cyBhbmQgcmV0dXJuIHRvIG9yaWdpbmFsIGFmdGVyIHByb2Nlc3MgY29tcGxldGUsIGlzTG9hZGluZyA9IHRydWUvZmFsc2VcbiAgaXNMb2FkaW5nQnV0dG9uU3RhdGUoaXNMb2FkaW5nLCBzYXZlQnV0dG9uVGV4dCkge1xuICAgIGlmIChpc0xvYWRpbmcpIHtcbiAgICAgIHRoaXMuX3NhdmVCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zYXZlQnV0dG9uLnRleHRDb250ZW50ID0gc2F2ZUJ1dHRvblRleHQ7XG4gICAgfVxuICB9XG5cbiAgLy9Db2xsZWN0IGRhdGEgZnJvbSBpbnB1dCBmaWVsZCBhbmQgcmV0dXJuIGFzIG9iamVjdFxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9OyAvL2VtcHR5IG9iamVjdFxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgdGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzLl9mb3JtVmFsdWVzOyAvLyBpbnB1dCBmaWVsZCBkYXRhIHJldHVybmVkIGFzIG9iamVjdFxuICB9XG5cbiAgLy8vTW9kaWZ5IHBhcmVudCBzZXQgZXZlbnQgbGlzdGVuZXJzIC0gYWRkIHN1Ym1pdCBldiBoYW5kbGVyIGFuZCBjbGljayBldmVudCB0byBjbG9zZSBpY29uXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7IC8vQ2xvc2Ugd2l0aCBYIGljb24gYW5kIG92ZXJsYXkgY2xpY2tcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7IC8vcGFzcyBpbiB2YWx1ZXMgZnJvbSBvYmplY3Qgd2l0aCBpbnB1dCB2YWx1ZXNcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xuICAgIH0pO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTsgLy9jYWxsIGNsb3NlIGZvciBwYXJlbnRcbiAgICAvL3RoaXMuX3BvcHVwRm9ybS5yZXNldCgpOyAvL21vdmVkIHRvIHByZXZlbnQgdGhlIGNhcmQgZm9ybSBkZWxldGluZyBpbmZvIHdpdGggY2xpY2sgaGFuZGxlciBldmVudHMgYW5kIG9ubHkgcmVzZXR0aW5nIG9uIHN1Ym1pdCBldmVudFxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEZvcm07XG4iLCIvL0luaXRpYWwgQ2FyZHMgdG8gYmUgcmVuZGVyZWRcbi8qZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnIFwiLFxuICB9LFxuXTsqL1xuXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl9pbnB1dF90eXBlXCIsXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcbn07XG5cbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy9Qcm9maWxlIENvbnN0YW50c1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIlxuKTtcblxuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiKTtcblxuZXhwb3J0IGNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX190aXRsZVwiKTtcblxuZXhwb3J0IGNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCJcbik7XG5cbmV4cG9ydCBjb25zdCBtb2RhbElucHV0TmFtZUZpZWxkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1uYW1lXCIpO1xuXG5leHBvcnQgY29uc3QgbW9kYWxJbnB1dERlc2NyaXB0aW9uRmllbGQgPVxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLWRlc2NyaXB0aW9uXCIpO1xuXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vQ2FyZCBDb25zdGFudHNcbmV4cG9ydCBjb25zdCBjYXJkRWRpdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLWVkaXQtbW9kYWxcIik7XG5leHBvcnQgY29uc3QgY2FyZEVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XG5cbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy9Qcm9maWxlIEF2YXRhciBDb25zdGFudHNcbmV4cG9ydCBjb25zdCBhdmF0YXJFZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIiNwcm9maWxlaW1hZ2UtZWRpdC1tb2RhbFwiXG4pO1xuXG5leHBvcnQgY29uc3QgcHJvZmlsZUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyXCIpOyAvL1xuXG5leHBvcnQgY29uc3QgYXZhdGFyQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXItZWRpdFwiKTtcbiIsIi8vSW1wb3J0c1xuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aENvbmZpcm1hdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcbmltcG9ydCB7XG4gIC8vaW5pdGlhbENhcmRzLFxuICBjb25maWcsXG4gIHByb2ZpbGVFZGl0QnV0dG9uLFxuICBwcm9maWxlRWRpdE1vZGFsLFxuICBwcm9maWxlTmFtZSxcbiAgcHJvZmlsZURlc2NyaXB0aW9uLFxuICBtb2RhbElucHV0TmFtZUZpZWxkLFxuICBtb2RhbElucHV0RGVzY3JpcHRpb25GaWVsZCxcbiAgY2FyZEVkaXRNb2RhbCxcbiAgY2FyZEVkaXRCdXR0b24sXG4gIGF2YXRhckVkaXRNb2RhbCxcbiAgcHJvZmlsZUF2YXRhcixcbiAgYXZhdGFyQnV0dG9uLFxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5cbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vU2V0dXAgQVBJIGJhc2VVcmwgYW5kIGhlYWRlcnMgd2l0aCB0b2tlbiBhbmQgZ3JvdXBJRFxuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMlwiLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogXCI4NzFjZmQ3OS0yNGIxLTQ2OWUtOWFhMy00ZTRhNmZmNThmZGNcIixcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgfSxcbn0pO1xuXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vL0Zvcm0gVmFsaWRhdGlvbnMgSW5zdGFuY2VzIGFuZCBmdW5jdGlvbiBmcm9tIGNsYXNzXG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgcHJvZmlsZUVkaXRNb2RhbCk7XG5jb25zdCBhZGRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBjYXJkRWRpdE1vZGFsKTtcbmNvbnN0IGF2YXRhckZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGF2YXRhckVkaXRNb2RhbCk7XG5hdmF0YXJGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuYWRkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5hdmF0YXJGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vUHJvZmlsZSBNb2RhbCBGdW5jdGlvbnNcbi8vVXNlciBJbmZvIGNhbGxiYWNrXG5jb25zdCB1c2VyaW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gIHVzZXJOYW1lOiBwcm9maWxlTmFtZSxcbiAgdXNlckpvYjogcHJvZmlsZURlc2NyaXB0aW9uLFxuICB1c2VyQXZhdGFyOiBwcm9maWxlQXZhdGFyLCAvL2FkZGVkIGZvciBhdmF0YXJcbn0pO1xuXG4vL09wZW4gUHJvZmlsZSBFZGl0IFBvcHVwIEZvcm1cbmZ1bmN0aW9uIG9wZW5Qcm9maWxlRWRpdEZvcm0oKSB7XG4gIGNvbnN0IHsgbmFtZSwgYWJvdXQgfSA9IHVzZXJpbmZvLmdldFVzZXJJbmZvKCk7IC8vd2FzIGRlc2NyaXB0aW9uLCB0aXRsZVxuICBtb2RhbElucHV0TmFtZUZpZWxkLnZhbHVlID0gbmFtZTtcbiAgbW9kYWxJbnB1dERlc2NyaXB0aW9uRmllbGQudmFsdWUgPSBhYm91dDtcbiAgcHJvZmlsZVBvcHVwLm9wZW4oKTtcbn1cblxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9wZW5Qcm9maWxlRWRpdEZvcm0pO1xuXG4vL0FkZCBQcm9maWxlIEZvcm0gSW5wdXQgYW5kIHJlbmRlciBvbiBwYWdlXG5jb25zdCBwcm9maWxlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNwcm9maWxlLWVkaXQtbW9kYWxcIiwgKHZhbHVlcykgPT4ge1xuICBwcm9maWxlUG9wdXAuaXNMb2FkaW5nQnV0dG9uU3RhdGUodHJ1ZSk7XG4gIGFwaVxuICAgIC51cGRhdGVQcm9maWxlSW5mbyh2YWx1ZXMpXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIHVzZXJpbmZvLnNldFVzZXJJbmZvKGRhdGEpO1xuICAgICAgcHJvZmlsZVBvcHVwLmNsb3NlKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIHByb2ZpbGVQb3B1cC5pc0xvYWRpbmdCdXR0b25TdGF0ZShmYWxzZSwgXCJTYXZlXCIpO1xuICAgIH0pO1xufSk7XG5cbnByb2ZpbGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vL0FkZCBQcm9maWxlIEF2YXRhciBMaW5rIElucHV0IGFuZCByZW5kZXIgb24gcGFnZVxuY29uc3QgYXZhdGFyUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNwcm9maWxlaW1hZ2UtZWRpdC1tb2RhbFwiLCAodmFsdWVzKSA9PiB7XG4gIGF2YXRhclBvcHVwLmlzTG9hZGluZ0J1dHRvblN0YXRlKHRydWUpO1xuICBhcGlcbiAgICAudXBkYXRlUHJvZmlsZUF2YXRhcih2YWx1ZXMuYXZhdGFyKSAvL2F2YXRhciB1cmwgcmV0dXJuZWRcbiAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgdXNlcmluZm8uc2V0VXNlckluZm8oZGF0YSk7IC8vdXBkYXRlcyBsaW5rLCBkb2VzIG5vdCByZW5kZXIgbGluayBvbiBwYWdlXG4gICAgICBhdmF0YXJQb3B1cC5jbG9zZSgpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBhdmF0YXJQb3B1cC5pc0xvYWRpbmdCdXR0b25TdGF0ZShmYWxzZSwgXCJTYXZlXCIpO1xuICAgIH0pO1xufSk7XG5cbmF2YXRhckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gYXZhdGFyUG9wdXAub3BlbigpKTtcblxuYXZhdGFyUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy9BZGQgQ2FyZCBhbmQgUG9wdXAgSW5zdGFuY2VzXG4vL1ByZXZpZXcgUG9wdXAgaW5zdGFuY2VcbmNvbnN0IHByZXZpZXdQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIiNwcmV2aWV3LW1vZGFsXCIpO1xuXG4vL0RlbGV0ZSBDYXJkIGluc3RhbmNlXG5jb25zdCBkZWxldGVDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKFwiI2RlbGV0ZS1jb25maXJtLW1vZGFsXCIpO1xubGV0IGNhcmRTZWN0aW9uO1xubGV0IHVzZXJJZDtcblxuZGVsZXRlQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vRnVuY3Rpb24gdG8gY3JlYXRlIG5ldyBjYXJkIGNhbGxlZCB3aXRoIHJlbmRlcmVyXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGNhcmREYXRhKSB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcbiAgICBjYXJkRGF0YSxcbiAgICB1c2VySWQsXG4gICAgXCIjY2FyZC10ZW1wbGF0ZVwiLFxuICAgIC8vaGFuZGxlQ2FyZENsaWNrXG4gICAgKGNhcmROYW1lLCBjYXJkTGluaykgPT4ge1xuICAgICAgcHJldmlld1BvcHVwLm9wZW4oY2FyZE5hbWUsIGNhcmRMaW5rKTtcbiAgICB9LFxuICAgIC8vaGFuZGxlRGVsZXRlQ2xpY2sgd2l0aCBjYWxsYmFjayBmdW5jdGlvbiB0byByZW1vdmUgc3BlY2lmaWVkIHVzZXIgY2FyZCBvbmx5XG4gICAgKGNhcmRJZCkgPT4ge1xuICAgICAgZGVsZXRlQ2FyZFBvcHVwLm9wZW4oKTtcbiAgICAgIGRlbGV0ZUNhcmRQb3B1cC5zZXRTdWJtaXRBY3Rpb24oKCkgPT4ge1xuICAgICAgICBhcGkuZGVsZXRlVXNlckNhcmQoY2FyZElkKS50aGVuKCgpID0+IHtcbiAgICAgICAgICBjYXJkLmRlbGV0ZUNhcmQoKTtcbiAgICAgICAgICBkZWxldGVDYXJkUG9wdXAuY2xvc2UoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIC8vaGFuZGxlTGlrZUNsaWNrIHRvIHNldCBoZWFydCBidXR0b24gc3RhdGVcbiAgICAoY2FyZElkKSA9PiB7XG4gICAgICBpZiAoY2FyZC5jaGVja0NhcmRMaWtlZFN0YXRlKCkpIHtcbiAgICAgICAgYXBpXG4gICAgICAgICAgLnJlbW92ZUNhcmRMaWtlcyhjYXJkSWQpXG4gICAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgIGNhcmQucmVtb3ZlQ2FyZExpa2UoKTtcbiAgICAgICAgICAgIGNhcmQuc2V0TGlrZXNDb3VudGVyKGRhdGEubGlrZXMubGVuZ3RoKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXBpXG4gICAgICAgICAgLmFkZENhcmRMaWtlcyhjYXJkSWQpXG4gICAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgIGNhcmQuYWRkQ2FyZExpa2UoKTtcbiAgICAgICAgICAgIGNhcmQuc2V0TGlrZXNDb3VudGVyKGRhdGEubGlrZXMubGVuZ3RoKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sXG4gICAgLy9sb2FkaW5nTGlrZUNoZWNrIC0gbG9vcHMgdGhyb3VnaCBjYXJkcyBhbmQgcmVuZGVycyBzZXJ2ZXIgbGlrZXMgb24gcGFnZVxuICAgIChjYXJkRGF0YSkgPT4ge1xuICAgICAgY2FyZERhdGEuZm9yRWFjaCgoY2FyZE9iaikgPT4ge1xuICAgICAgICBpZiAoY2FyZE9iai5faWQgPT09IHVzZXJJZCkge1xuICAgICAgICAgIGNhcmQuYWRkQ2FyZExpa2UoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICApO1xuICByZXR1cm4gY2FyZDtcbn1cbi8vQ29sbGVjdHMgaW5pdGlhbENhcmRzIGluZm8gZnJvbSBzZXJ2ZXIgYW5kIHJlbmRlcnMgdGhlbSBvbiB0aGUgcGFnZVxuYXBpLmdldEFQSUluZm8oKS50aGVuKChbdXNlckRhdGEsIHVzZXJDYXJkc10pID0+IHtcbiAgdXNlcklkID0gdXNlckRhdGEuX2lkOyAvL2Fzc2lnbiAuX2lkIHRvIHVzZXJJZCB2YXJpYWJsZVxuICB1c2VyaW5mby5zZXRVc2VySW5mbyh1c2VyRGF0YSk7XG4gIGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXG4gICAge1xuICAgICAgaXRlbXM6IHVzZXJDYXJkcyxcbiAgICAgIHJlbmRlcmVyOiAoY2FyZERhdGEpID0+IHtcbiAgICAgICAgY29uc3QgbmV3Q2FyZCA9IGNyZWF0ZUNhcmQoY2FyZERhdGEpO1xuICAgICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKG5ld0NhcmQuZ2V0VmlldygpKTtcbiAgICAgIH0sXG4gICAgfSxcbiAgICBcIi5jYXJkc19fbGlzdFwiXG4gICk7XG4gIGNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XG59KTtcblxuLy9BZGQgbmV3IGNhcmQgd2l0aCBhZGQgY2FyZCBmb3JtIGFuZCByZW5kZXIgb24gdGhlIHBhZ2VcbmNvbnN0IGFkZENhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI2NhcmQtZWRpdC1tb2RhbFwiLCAodmFsdWVzKSA9PiB7XG4gIGFkZENhcmRQb3B1cC5pc0xvYWRpbmdCdXR0b25TdGF0ZSh0cnVlKTtcbiAgYXBpXG4gICAgLmFkZE5ld0NhcmQodmFsdWVzKVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICBjb25zdCBhZGRDYXJkID0gY3JlYXRlQ2FyZChkYXRhKTsgLy9jaGFuZ2UgdG8gY29uc3QgY29uc3QgYWRkIGNhcmQgY3JlYXRlIGNhcmQgY3JlYXRlQ2FyZChkYXRhKVxuICAgICAgYWRkQ2FyZFBvcHVwLmNsb3NlKCk7IC8vY2xvc2Ugd2l0aCBzdWJtaXRcbiAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oYWRkQ2FyZC5nZXRWaWV3KCkpOyAvL2dldCB2aWV3XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIGFkZENhcmRQb3B1cC5pc0xvYWRpbmdCdXR0b25TdGF0ZShmYWxzZSwgXCJDcmVhdGVcIik7XG4gICAgfSk7XG4gIGNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XG59KTtcblxuLy9PcGVuIGNhcmQgcG9wdXAgd2l0aCBvcGVuIGFuZCBjbGljayBsaXN0ZW5lclxuY2FyZEVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGFkZENhcmRQb3B1cC5vcGVuKCkpO1xuXG5hZGRDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiIsIi8vIFJlbmRlciBVc2VyIGluZm8gb24gdGhlIHBhZ2VcblxuY2xhc3MgVXNlckluZm8ge1xuICAvL2FkZCBjb25zdHJ1Y3RvciAtIHRha2UgaW4gb2JqIC0gc2VsZWN0b3JzIG9mIHR3byBlbGVtZW50c1xuICBjb25zdHJ1Y3Rvcih7IHVzZXJOYW1lLCB1c2VySm9iLCB1c2VyQXZhdGFyIH0pIHtcbiAgICB0aGlzLl91c2VyTmFtZSA9IHVzZXJOYW1lOyAvL3Byb2ZpbGUgdGl0bGVcbiAgICB0aGlzLl91c2VyRGVzY3JpcHRpb24gPSB1c2VySm9iOyAvL3Byb2ZpbGUgZGVzY3JpcHRpb25cbiAgICB0aGlzLl91c2VyQXZhdGFyID0gdXNlckF2YXRhcjtcbiAgfVxuXG4gIC8vcmV0dXJuIG9iamVjdCB3aXRoIGluZm8gYWJvdXQgdXNlciAtPiBuZWVkIHRvIHJldHVybiB2YWx1ZXMgZnJvbSB0aGVyZSBhbHJlYWR5XG4gIC8vaW4gaW5kZXguanMsIHZhbHVlIGdldHMgcmV0dXJuZWQgdG8gdmFyaWFibGVcbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50LCAvL3dhcyB0aXRsZVxuICAgICAgYWJvdXQ6IHRoaXMuX3VzZXJEZXNjcmlwdGlvbi50ZXh0Q29udGVudCwgLy93YXMgZGVzY3JpcHRpb25cbiAgICAgIGF2YXRhcjogdGhpcy5fdXNlckF2YXRhcixcbiAgICB9O1xuICB9XG5cbiAgc2V0VXNlckluZm8odmFsdWUpIHtcbiAgICB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCA9IHZhbHVlLm5hbWU7IC8vd2FzIHRpdGxlXG4gICAgdGhpcy5fdXNlckRlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gdmFsdWUuYWJvdXQ7IC8vd2FzIGRlc2NyaXB0aW9uXG4gICAgdGhpcy5fdXNlckF2YXRhci5zcmMgPSB2YWx1ZS5hdmF0YXI7IC8vdGhpcyBuZWVkcyB0byByZW5kZXIgYW4gaW1hZ2UgZm9yIHRoZSBsaW5rXG4gICAgdGhpcy5fdXNlckF2YXRhci5hbHQgPSB2YWx1ZS5uYW1lO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFVzZXJJbmZvO1xuIiwiLy9DaGlsZCBvZiBQb3B1cFxuLy9DaGFuZ2VzIHBhcmVudCBvcGVuIG1ldGhvZCB0byBhZGQgaW1hZ2UgdG8gcG9wdXAgd2l0aCBzcmMgYW5kIGNhcHRpb25cbmltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5jbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIC8vaW5zdGFudGlhdGUgcGFyZW50IGNvbnN0cnVjdG9yIGFuZCBnZXQgYWNjZXNzIHRvIHBvcHVwZWxlbWVudCBmcm9tIHBhcmVudFxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgICAvL3NldCBuYW1lIGFuZCBsaW5rIHByb3BlcnRpZXMgZnJvbSBwb3B1cFByZXZpZXcgdG8gYXNzaWduIHZhbHVlcyB3aXRoIG9wZW5cbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLnByZXZpZXctbW9kYWxfX2ltYWdlXCJcbiAgICApO1xuICAgIHRoaXMuX3ByZXZpZXdOYW1lID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5wcmV2aWV3LW1vZGFsX19jYXB0aW9uXCJcbiAgICApO1xuICB9XG4gIG9wZW4obmFtZSwgbGluaykge1xuICAgIHRoaXMuX3ByZXZpZXdJbWFnZS5zcmMgPSBsaW5rO1xuICAgIHRoaXMuX3ByZXZpZXdJbWFnZS5hbHQgPSBuYW1lO1xuICAgIHRoaXMuX3ByZXZpZXdOYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICBzdXBlci5vcGVuKCk7IC8vcGFyZW50IG9wZW4gbWV0aG9kIGNhbGxlZFxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEltYWdlO1xuIiwiLy9IYW5kbGVzIFllcyBzdWJtaXQgb24gZGVsZXRlIGNvbmZpcm0gcG9wdXBcbmltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5jbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7IC8vU2VsZWN0IGZvcm0gY2xhc3MgZm9yIGRlbGV0ZSBmb3JtXG4gICAgdGhpcy5fY29uZmlybUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZGVsZXRlLWNvbmZpcm0tYnV0dG9uXCIpOyAvL1llcyBidXR0b24gaW4gZm9ybSBmb3IgZGVsZXRlIGNoZWNrXG4gIH1cblxuICAvL1NldCBmdW5jdGlvbiBmb3Igc3VibWl0IGFjdGlvbiAtIHBhc3MgaW4gbmV3IGNhbGxiYWNrIGZ1bmN0aW9uIHBhc3NlZCBpbiBsYXRlciwgYWN0aW9uIGFyZyA9IGNhbGxiYWNrIGZ1bmN0aW9uOmNhbGxlZCBkeW5hbWljYWxseSBpbiBpbmRleC5qc1xuICBzZXRTdWJtaXRBY3Rpb24oYWN0aW9uKSB7XG4gICAgdGhpcy5faGFuZGxlU3VibWl0ID0gYWN0aW9uO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTsgLy9zZXQgcGFyZW50IGV2ZW50IGxpc3RlbmVyc1xuICAgIC8vbmVlZHMgdG8gYmUgYnV0dG9uIGNsaWNrIGxpbmtlZCB0byBjYWxsIGJhY2sgdG8gZGVsZXRlIHRoZSBjYXJkID0gY2hhbmdlIGZyb21fcG9wb3BlbGVtZW50IHRvIGNvbmZpcm1idXR0b24gYW5kIHN1Ym1pdCB0byBjbGljayAxOC8zYW1cbiAgICB0aGlzLl9jb25maXJtQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCgpOyAvL2NhbGxiYWNrIGZ1bmN0aW9uIHRvIGJlIHNldFxuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aENvbmZpcm1hdGlvbjtcbiIsIi8vU2VjdGlvbiBjbGFzcyByZW5kZXJzIGxpc3Qgb2YgZWxlbWVudHMgb24gcGFnZVxuY2xhc3MgU2VjdGlvbiB7XG4gIC8vYWRkIGNvbnN0cnVjdG9yXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNsYXNzU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zOyAvL2RhdGEgYXJyYXlcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyOyAvL2Z1bmN0aW9uIHRvIGNyZWF0ZS9yZW5kZXIgZGF0YSBvbiBwYWdlXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihjbGFzc1NlbGVjdG9yKTsgLy9DU1Mgc2VsZWN0b3IgZm9yIHdoZXJlIHRvIGVtYmVkIGl0ZW1cbiAgfVxuXG4gIC8vbWV0aG9kIHRvIHJlbmRlciBhbGwgZWxlbWVudHMgb24gcGFnZSAtIGNoYW5nZWQgaXRlbXNBcnJheSB0byBjYXJkcyBpbiBzZWN0aW9uIGZvciBnZXRBUElpbmZvXG4gIHJlbmRlckl0ZW1zKCkge1xuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pOyAvL3JlbmRlcmVyIGZ1bmN0aW9uIHJlbmRlcnMgZWFjaCBlbGVtZW50IG9uIHBhZ2VcbiAgICB9KTtcbiAgfVxuXG4gIC8vbWV0aG9kIHRvIHRha2UgRE9NIGVsZW1lbnQgYW5kIGFkZCB0byBjb250YWluZXJcbiAgYWRkSXRlbShpdGVtKSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoaXRlbSk7IC8vYXBwZW5kIGVsZW1lbnQgdG8gcGFnZVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNlY3Rpb247XG4iXSwibmFtZXMiOlsiY29uc3RydWN0b3IiLCJkYXRhIiwidXNlcklkIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlRGVsZXRlQ2xpY2siLCJoYW5kbGVMaWtlQ2xpY2siLCJsb2FkaW5nTGlrZUNoZWNrIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9pZCIsIl9saWtlcyIsImxpa2VzIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlRGVsZXRlQ2xpY2siLCJfaGFuZGxlTGlrZUNsaWNrIiwiX2xvYWRpbmdMaWtlQ2hlY2siLCJfdXNlcklkIiwiX3VzZXJDYXJkT3duZXJJZCIsIl9nZXRUZW1wbGF0ZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfc2V0Q2FyZEV2ZW50TGlzdGVuZXJzIiwiX2xpa2VCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiX2RlbGV0ZUJ1dHRvbiIsIl9jYXJkSW1hZ2UiLCJfaGFuZGxlQ2FyZFByZXZpZXciLCJfaGFuZGxlQ2FyZExpa2UiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJkZWxldGVDYXJkIiwiX2NhcmRFbGVtZW50IiwicmVtb3ZlIiwic2V0TGlrZXNDb3VudGVyIiwiX2NhcmRMaWtlcyIsInRleHRDb250ZW50IiwiYWRkQ2FyZExpa2UiLCJhZGQiLCJyZW1vdmVDYXJkTGlrZSIsImNoZWNrQ2FyZExpa2VkU3RhdGUiLCJjb250YWlucyIsImdldFZpZXciLCJzcmMiLCJhbHQiLCJfcHJldmlld0J1dHRvbiIsImxlbmd0aCIsImNvbmZpZyIsImZvcm1FbGVtZW50IiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm0iLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsZW1lbnQiLCJlcnJvckVsZW1lbnQiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGFzSW52YWxpZElucHV0IiwiX2lucHV0RWxlbWVudHMiLCJldmVyeSIsIl9lbmFibGVTdWJtaXRCdXR0b24iLCJfYnV0dG9uRWxlbWVudCIsImRpc2FibGVkIiwiX2Rpc2FibGVTdWJtaXRCdXR0b24iLCJ0b2dnbGVCdXR0b25TdGF0ZSIsIl9zZXRFdmVudExpc3RlbmVycyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJzZXRUaW1lb3V0IiwiZm9yRWFjaCIsImVuYWJsZVZhbGlkYXRpb24iLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsIl9yZWYiLCJwb3B1cFNlbGVjdG9yIiwidGFyZ2V0IiwiY2xvc2UiLCJfcG9wdXBFbGVtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIm9wZW4iLCJfaGFuZGxlT3ZlcmxheUNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwiUG9wdXAiLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfcG9wdXBGb3JtIiwiX2lucHV0TGlzdCIsIl9zYXZlQnV0dG9uIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJpc0xvYWRpbmdCdXR0b25TdGF0ZSIsImlzTG9hZGluZyIsInNhdmVCdXR0b25UZXh0IiwiX2dldElucHV0VmFsdWVzIiwiX2Zvcm1WYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwicmVzZXQiLCJmb3JtU2VsZWN0b3IiLCJwcm9maWxlRWRpdEJ1dHRvbiIsInByb2ZpbGVFZGl0TW9kYWwiLCJwcm9maWxlTmFtZSIsInByb2ZpbGVEZXNjcmlwdGlvbiIsIm1vZGFsSW5wdXROYW1lRmllbGQiLCJtb2RhbElucHV0RGVzY3JpcHRpb25GaWVsZCIsImNhcmRFZGl0TW9kYWwiLCJjYXJkRWRpdEJ1dHRvbiIsImF2YXRhckVkaXRNb2RhbCIsInByb2ZpbGVBdmF0YXIiLCJhdmF0YXJCdXR0b24iLCJhcGkiLCJiYXNlVXJsIiwiaGVhZGVycyIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJfY2hlY2tSZXNwb25zZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJnZXRVc2VySW5mbyIsImZldGNoIiwibWV0aG9kIiwidGhlbiIsImdldEluaXRpYWxDYXJkcyIsImdldEFQSUluZm8iLCJhbGwiLCJ1cGRhdGVQcm9maWxlSW5mbyIsInVzZXJEYXRhIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhZGROZXdDYXJkIiwiY2FyZERhdGEiLCJkZWxldGVVc2VyQ2FyZCIsImNhcmRJZCIsImFkZENhcmRMaWtlcyIsInJlbW92ZUNhcmRMaWtlcyIsInVwZGF0ZVByb2ZpbGVBdmF0YXIiLCJhdmF0YXIiLCJhdXRob3JpemF0aW9uIiwiZWRpdEZvcm1WYWxpZGF0b3IiLCJGb3JtVmFsaWRhdG9yIiwiYWRkRm9ybVZhbGlkYXRvciIsImF2YXRhckZvcm1WYWxpZGF0b3IiLCJ1c2VyaW5mbyIsInVzZXJOYW1lIiwidXNlckpvYiIsInVzZXJBdmF0YXIiLCJfdXNlck5hbWUiLCJfdXNlckRlc2NyaXB0aW9uIiwiX3VzZXJBdmF0YXIiLCJhYm91dCIsInNldFVzZXJJbmZvIiwicHJvZmlsZVBvcHVwIiwiUG9wdXBXaXRoRm9ybSIsInZhbHVlcyIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImZpbmFsbHkiLCJhdmF0YXJQb3B1cCIsInByZXZpZXdQb3B1cCIsIl9wcmV2aWV3SW1hZ2UiLCJfcHJldmlld05hbWUiLCJkZWxldGVDYXJkUG9wdXAiLCJfY29uZmlybUJ1dHRvbiIsInNldFN1Ym1pdEFjdGlvbiIsImFjdGlvbiIsIl9oYW5kbGVTdWJtaXQiLCJjYXJkU2VjdGlvbiIsImNyZWF0ZUNhcmQiLCJjYXJkIiwiQ2FyZCIsImNhcmROYW1lIiwiY2FyZExpbmsiLCJjYXJkT2JqIiwidXNlckNhcmRzIiwiY2xhc3NTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiYWRkSXRlbSIsInByZXBlbmQiLCJuZXdDYXJkIiwiYWRkQ2FyZFBvcHVwIiwiYWRkQ2FyZCJdLCJzb3VyY2VSb290IjoiIn0=