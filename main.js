!function(){"use strict";var e=class{constructor(e,t,s,r,i,n){this._name=e.name,this._link=e.link,this._id=e._id,this._likes=e.likes,this._cardSelector=s,this._handleCardClick=r,this._handleDeleteClick=i,this._handleLikeClick=n,this._userId=t,this._userCardOwnerId=e.owner._id}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setCardEventListeners(){this._likeButton.addEventListener("click",(()=>{this._handleLikeClick(this._id)})),this._deleteButton.addEventListener("click",(()=>{this._handleDeleteClick(this._id)})),this._cardImage.addEventListener("click",(()=>{this._handleCardPreview()}))}_handleCardLike(){this._likeButton.classList.toggle("card__like-button_active")}_handleCardPreview(){this._handleCardClick(this._name,this._link)}deleteCard(){this._cardElement.remove(),this._cardElement=null}cardLiked(){return this._likes.some((e=>e._id===this._userId))}_setLikeButtonState(){this._cardLikes=this._cardElement.querySelector(".card__likes-counter"),this._cardLikes.textContent=this._likes.length,this.cardLiked()?this._likeButton.classList.add("card__like-button_active"):this._likeButton.classList.remove("card__like-button_active")}setLikesCounter(e){this._likes=e,this._setLikeButtonState()}getView(){return this._cardElement=this._getTemplate(),this._cardElement.querySelector(".card__name").textContent=this._name,this._cardImage=this._cardElement.querySelector(".card__image"),this._cardImage.src=this._link,this._cardImage.alt=this._name,this._cardLikes=this._cardElement.querySelector(".card__likes-counter"),this._cardLikes=this._likes.length,this._likeButton=this._cardElement.querySelector(".card__like-button"),this._deleteButton=this._cardElement.querySelector(".card__delete-button"),this._previewButton=this._cardElement.querySelector("#preview-button"),this._userId!=this._userCardOwnerId&&this._deleteButton.remove(),this.cardLiked()?this._likeButton.classList.add("card__like-button_active"):this._likeButton.classList.remove("card__like-button_active"),this._setCardEventListeners(),this._cardElement}},t=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasInvalidInput(){return!this._inputElements.every((e=>e.validity.valid))}_enableSubmitButton(){this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1}_disableSubmitButton(){this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0}toggleButtonState(){this._hasInvalidInput(this._inputElements)?this._disableSubmitButton():this._enableSubmitButton()}_setEventListeners(){this._inputElements=[...this._form.querySelectorAll(this._inputSelector)],this._buttonElement=this._form.querySelector(this._submitButtonSelector),this.toggleButtonState(),this._form.addEventListener("reset",(()=>{setTimeout((()=>{this.toggleButtonState()}),0)})),this._inputElements.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}};var s=class{constructor(e){let{popupSelector:t}=e;var s,r,i;s=this,i=e=>{(e.target.classList.contains("modal_opened")||e.target.classList.contains("modal__close"))&&this.close()},(r=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(r="_handleOverlayClose"))in s?Object.defineProperty(s,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):s[r]=i,this._popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose),document.addEventListener("mousedown",this._handleOverlayClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose),document.removeEventListener("mousedown",this._handleOverlayClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popupElement.addEventListener("click",this.close())}},r=class extends s{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._inputList=this._popupForm.querySelectorAll(".modal__input"),this._handleFormSubmit=t}_getInputValues(){return this._formValues={},this._inputList.forEach((e=>{this._formValues[e.name]=e.value})),this._formValues}setEventListeners(){super.setEventListeners(),this._popupElement.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this.close()}))}close(){super.close(),this._popupForm.reset()}};const i={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__error_input_type",errorClass:"modal__error_visible"},n=document.querySelector(".profile__edit-button"),o=document.querySelector("#profile-edit-modal"),a=document.querySelector(".profile__title"),l=document.querySelector(".profile__description"),d=document.querySelector("#modal-name"),c=document.querySelector("#modal-description"),h=document.querySelector("#card-edit-modal"),u=document.querySelector(".profile__add-button"),_=document.querySelector("#profileimage-edit-modal"),m=document.querySelector("#profileimage-link"),p=document.querySelector(".profile__avatar-edit"),v=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error ${e.status}`)}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{method:"GET",headers:this._headers}).then(this._checkResponse)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{method:"GET",headers:this._headers}).then(this._checkResponse)}getAPIInfo(){return Promise.all([this.getUserInfo(),this.getInitialCards()])}updateProfileInfo(e,t){return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})}).then(this._checkResponse)}addNewCard(e,t){return fetch(`${this._baseUrl}/cards`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,link:t})}).then(this._checkResponse)}deleteUserCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}addCardLikes(e){return fetch(`${this._baseUrl}/cards/likes/${e}`,{method:"PUT",headers:this._headers}).then(this._checkResponse)}removeCardLikes(e){return fetch(`${this._baseUrl}/cards/likes/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}updateProfileAvatar(e){return fetch(`${this._baseUrl}/users/me/${e}`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._checkResponse)}}({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"871cfd79-24b1-469e-9aa3-4e4a6ff58fdc","Content-Type":"application/json"}}),E=new t(i,o),k=new t(i,h),b=new t(i,_);b.enableValidation(),E.enableValidation(),k.enableValidation(),b.enableValidation();const f=new class{constructor(e){let{userName:t,userJob:s,userAvatar:r}=e;this._userName=t,this._userDescription=s,this._userAvatar=r}getUserInfo(){return{name:this._userName.textContent,about:this._userDescription.textContent}}setUserInfo(e){this._userName.textContent=e.name,this._userDescription.textContent=e.about,this._userAvatar.src=e.avatar,this._userAvatar.alt=e.title}}({userName:a,userJob:l,userAvatar:m});n.addEventListener("click",(function(){const{name:e,about:t}=f.getUserInfo();d.value=e,c.value=t,L.open()}));const L=new r("#profile-edit-modal",(e=>{v.updateProfileInfo(e).then((e=>{f.setUserInfo(e),L.close()})).catch((e=>{console.log(e)}))}));L.setEventListeners();const S=new r("#profileimage-edit-modal",(e=>{v.updateProfileAvatar(e.link).then((e=>{f.setUserInfo(e),S.close()})).catch((e=>{console.log(e)}))}));p.addEventListener("click",(()=>S.open())),S.setEventListeners();const C=new class extends s{constructor(e){super({popupSelector:e}),this._previewImage=this._popupElement.querySelector(".preview-modal__image"),this._previewName=this._popupElement.querySelector(".preview-modal__caption")}open(e,t){this._previewImage.src=t,this._previewImage.alt=e,this._previewName.textContent=e,super.open()}}("#preview-modal"),y=new class extends s{constructor(e){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form")}setSubmitAction(e){this._handleSubmit=e}setEventListeners(){super.setEventListeners(),this._popupElement.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmit()}))}}("#delete-confirm-modal");let g;function I(t){const s=new e(t,g,"#card-template",((e,t)=>{C.open(e,t)}),(e=>{y.open(),y.setSubmitAction((()=>{v.deleteUserCard(e).then((()=>{y.close(),s.deleteCard()}))}))}),(e=>(s.cardLiked()?v.addCardLikes(e).then((e=>{s.setLikesCounter(e.likes)})).catch((e=>{console.log(e)})):v.removeCardLikes(e).then((e=>{s.setLikesCounter(e.likes)})).catch((e=>{console.log(e)})),s)))}y.setEventListeners();const w=new class{constructor(e,t){let{renderer:s}=e;this._renderer=s,this._container=document.querySelector(t)}renderItems(){cards.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({renderer:e=>{const t=I(e);w.addItem(t.getView())}},".cards__list"),q=new r("#card-edit-modal",(e=>{v.addNewCard(e).then((e=>{I(e),q.close()})).catch((e=>{console.log(e)}))}));u.addEventListener("click",(()=>q.open())),q.setEventListeners(),v.getAPIInfo().then((e=>{let[t,s]=e;g=s._id,w.renderItems(t),f.setUserInfo(s)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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eEIsQ0FHQUMsUUFBUUQsR0FDTjlMLEtBQUsyTCxXQUFXSyxRQUFRRixFQUMxQixHSnNKQSxDQUNFTCxTQUFXUCxJQUNULE1BQU1lLEVBQVVoQixFQUFXQyxHQUMzQkssRUFBWVEsUUFBUUUsRUFBUXpKLFVBQVUsR0FHMUMsZ0JBa0JJMEosRUFBZSxJQUFJL0IsRUFBYyxvQkFBcUJDLElBRTFEL0MsRUFDR3dCLFdBQVd1QixHQUNYaEMsTUFBTTFJLElBQ0x1TCxFQUFXdkwsR0FDWHdNLEVBQWE3RyxPQUFPLElBRXJCZ0YsT0FBT0MsSUFDTkMsUUFBUUMsSUFBSUYsRUFBSSxHQUNoQixJQU9OckQsRUFBZTVGLGlCQUFpQixTQUFTLElBQU02SyxFQUFhekcsU0FFNUR5RyxFQUFhckcsb0JBSWJ3QixFQUFJaUIsYUFBYUYsTUFBS25ELElBQXVCLElBQXJCNEcsRUFBT00sR0FBU2xILEVBQ3RDdEYsRUFBU3dNLEVBQVM5TCxJQUNsQmtMLEVBQVlLLFlBQVlDLEdBQVFwQyxFQUFTTyxZQUFZbUMsRUFBUyxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy9hdXRob3JpemF0aW9uIHRva2VuOiA4NzFjZmQ3OS0yNGIxLTQ2OWUtOWFhMy00ZTRhNmZmNThmZGNcbi8vZ3JvdXBJRDogZ3JvdXAtMTJcblxuLy9DcmVhdGUgYSBjbGFzcyBmb3IgQXBpXG4vL0NvbnRhaW5zIG1ldGhvZHMgZm9yIGFsbCB0aGUgcmVxdWVzdHMgdG8gYmUgbWFkZVxuLy9BbGwgcmVxdWVzdHMgbWFkZSBmcm9tIHRoaXMgY2xhc3Ncbi8vQWxsIHJlcXVlc3RzIHNob3VsZCBiZSBtZXRob2RzIG9mIHRoaXMgY2xhc3Ncbi8vQ29uc3RydWN0b3JzIGZvciB0aGUgYXBpIGNvbnN0IGNhbGxlZCBpbiBpbmRleC5qc1xuY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDsgLy9iYXNldXJsIGh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXBJZFxuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xuICB9XG4gIC8vY2hlY2tSZXNwb25zZSgpIC0+IENoZWNrIHJlc3BvbnNlcyBhbmQgZm9yIGVycm9ycyAtIGdlbmVyYWwgY2hlY2t0byBiZSBhZGRlZCB0byBhbGwgbWV0aG9kcyB0byBoYW5kbGUgZXJyb3JzL2NvbnRpbnVlIHdpdGggdGhlbiBzdGF0ZW1lbnRzXG4gIC8vQ2hlY2sgcmVzcG9uc2UgZnJvbSBlYWNoIGZldGNoIHJlcXVlc3QgZm9yIHJlc3BvbnNlIGFuZCBwYXJzZSBmcm9tIEpTT04gb2JqIGZvciBwcm9taXNlIG9yIGZvciBzZXJ2ZXIgZXJyb3IgdG8gZGVjaWRlIG5leHQgc3RlcCB3aXRoIHByb21pc2VcbiAgX2NoZWNrUmVzcG9uc2UocmVzKSB7XG4gICAgaWYgKHJlcy5vaykge1xuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3IgJHtyZXMuc3RhdHVzfWApO1xuICB9XG4gIC8vZ2V0VXNlckluZm8oKSAtPiByZXR1cm5zIG5hbWUsIGFib3V0LCBhdmF0YXIsX2lkLCBjb2hvcnRcbiAgLy9zZXQgdXJsIHRvIGZldGNoIGZyb20gdXJsIG9mIHJlcXVlc3RlZCByZXNvdWNlLCBhbmQgb3B0aW9ucyBvYmplY3Qgdy9tZXRob2QgYW5kIGhlYWRlcnMsIHRoZW4gY2hlY2sgc2VydmVyIHJlc3BvbnNlIHRvIHJlcXVlc3Qgdy9lcnJvciBwcm9taXNlXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuICAvL2dldEluaXRpYWxDYXJkcygpIC0+IHJldHVybnMgbmFtZSxsaW5rLCBfaWQsbGlrZXNcbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuICAvL2dldEFQSUluZm8gLT4gY2FyZHMgcmVuZGVyZWQgYWZ0ZXIgdXNlciBpbmZvIHJlY2VpdmVkIGZyb20gc2VydmVyIHcvUHJvbWlzZS5hbGwoKVxuICBnZXRBUElJbmZvKCkge1xuICAgIHJldHVybiBQcm9taXNlLmFsbChbdGhpcy5nZXRVc2VySW5mbygpLCB0aGlzLmdldEluaXRpYWxDYXJkcygpXSk7XG4gIH1cbiAgLy91cGRhdGVQcm9maWxlSW5mbyhuYW1lLGFib3V0KSAtPiBib2R5Om5hbWUsYWJvdXQgKHNwZWNpZmljYWxseSBmb3IgbmFtZSBhbmQgYWJvdXQgaW4gc3RyaW5nIGZvcm1hdClcbiAgdXBkYXRlUHJvZmlsZUluZm8obmFtZSwgYWJvdXQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIGFib3V0LFxuICAgICAgfSksXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuICAvL2FkZE5ld0NhcmQobmFtZSxsaW5rKSAtPiBib2R5Om5hbWUsbGluayhzcGVjaWZpY2FsbHkgZm9yIG5hbWUgYW5kIGxpbmsgaW4gc3RyaW5nIGZvcm1hdClcbiAgYWRkTmV3Q2FyZChuYW1lLCBsaW5rKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lLFxuICAgICAgICBsaW5rLFxuICAgICAgfSksXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuICAvL2RlbGV0ZVVzZXJDYXJkKGNhcmRJZCkgLT4gIF9pZCBhZGRlZCB0byBVUkwgaW4gcmVxdWVzdFxuICBkZWxldGVVc2VyQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG4gIC8vYWRkQ2FyZExpa2VzKGNhcmRJZCktPl9pZCBhZGRlZCB0byBVUkwgaW4gcmVxdWVzdFxuICBhZGRDYXJkTGlrZXMoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuICAvL3JlbW92ZUNhcmRMaWtlcyhjYXJkSWQpLT5faWQgYWRkZWQgdG8gVVJMIGluIHJlcXVlc3RcbiAgcmVtb3ZlQ2FyZExpa2VzKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cbiAgLy91cGRhdGVQcm9maWxlQXZhdGFyKGF2YXRhcikgLT4gYm9keTphdmF0YXIgKHNwZWNpZmljYWxseSBmb3IgYXZhdGFyIGluIHN0cmluZyBmb3JtYXQpXG4gIHVwZGF0ZVByb2ZpbGVBdmF0YXIoYXZhdGFyKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lLyR7YXZhdGFyfWAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgYXZhdGFyIH0pLFxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQXBpO1xuXG4vLy8vSFRNTF9DU1MvaW5kZXguanNcbi8vL2FkZCBnZXQgYXBwIGluZm8gbWV0aG9kIGludG8gaW5kZXguanMgdG8gZ2V0IHVzZXJJZCBhbmQgYXNzaWduIGZvciB1c2UgaW4gSlMgY29kZSBhbmQgdG8gcmVuZGVyIGNhcmRzIG9uIG9wZW5pbmdcbi8vLy9HZXQgbGlrZXMgZGF0YSBmcm9tIENhcmRzZGF0YWFycmF5IHRvIHNob3cgb24gcGFnZXNcbi8vLy9BZGQgbGlrZXMgY291bnQgZm9ybWF0IHVuZGVyIGxpa2UgYnV0dG9uIC0gZGF0YSBjaGFuZ2VzIGxpbmtlZCB0byBzZXJ2ZXJcbi8vLy9VWCBzYXZpbmcgYnV0dG9uIHdoaWxlIGxvYWRpbmcgLSBzZXQgdGltZXIvd2l0aCBBUEkgcmVxdWVzdCB0b29cblxuLy8vLy8vRE9ORSBTTyBGQVJcbi8vL0FkZCBQb3B1cCBmb3JtIGFmdGVyIGRlbGV0ZSBidXR0b24gY2xpY2sgLSBodG1sIG1vZGFsICsgaW5kZXguanMgY2FsbHNcbi8vL0JFRk9SRSBBUElcbi8vLy8vL0NvZGUgc28gYmluIGlzIG9ubHkgb24gdXNlcidzIGNhcmQgLSBwcmV2ZW50IG90aGVyIHVzZXJzIHRvIGRlbGV0ZSBvdGhlciB1c2VyJ3MgY2FyZFxuLy8vL1Byb2ZpbGUgcGljIGhvdmVyIGVkaXQgYnV0dG9uXG4vLy8vUHJvZmlsZSBwaWMgcG9wdXBmb3JtXG4iLCIvL0FERCB1c2VySWQgYWZ0ZXIgZGF0YSBpbiBjb25zdHJ1Y3RvciwgdW5jb21tZW50XG5cbmNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihcbiAgICBkYXRhLFxuICAgIHVzZXJJZCxcbiAgICBjYXJkU2VsZWN0b3IsXG4gICAgaGFuZGxlQ2FyZENsaWNrLFxuICAgIGhhbmRsZURlbGV0ZUNsaWNrLFxuICAgIGhhbmRsZUxpa2VDbGlja1xuICApIHtcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5faWQgPSBkYXRhLl9pZDtcbiAgICB0aGlzLl9saWtlcyA9IGRhdGEubGlrZXM7XG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljazsgLy9hZGQgbWV0aG9kIHRvIGNvbnN0cnVjdG9yXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sgPSBoYW5kbGVEZWxldGVDbGljaztcbiAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sgPSBoYW5kbGVMaWtlQ2xpY2s7XG4gICAgdGhpcy5fdXNlcklkID0gdXNlcklkO1xuICAgIHRoaXMuX3VzZXJDYXJkT3duZXJJZCA9IGRhdGFbXCJvd25lclwiXS5faWQ7IC8vc2hvd3MgZXJyb3Igb24gaW5kZXguanMgbG9jYWxcbiAgfVxuXG4gIC8vQWRkIG1ldGhvZHMgZm9yIGNhcmRzIGhlcmVcbiAgLy9fZ2V0VGVtcGxhdGUoKSBmcm9tIGNhcmRTZWxlY3RvciB3aXRoIGNsb25lIHRvIGNyZWF0ZSB0ZW1wbGF0ZVxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xuICAgIHJldHVybiBjYXJkRWxlbWVudDtcbiAgfVxuXG4gIC8vX3NldENhcmRFdmVudExpc3RlbmVycyBmb3IgY2xpY2sgZXZlbnRzIHdoYXQgYXJlIHRoZXkgZm9yXG4gIF9zZXRDYXJkRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgLy9MaWtlXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrKHRoaXMuX2lkKTtcbiAgICB9KTtcblxuICAgIC8vRGVsZXRlXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVDbGljayh0aGlzLl9pZCk7XG4gICAgfSk7XG4gICAgLy9QcmV2aWV3XG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVDYXJkUHJldmlldygpO1xuICAgIH0pO1xuICB9XG5cbiAgLy9faGFuZGxlRXZlbnRzKCkgc2V0IGV2ZW50IGhhbmRsZXJzXG4gIF9oYW5kbGVDYXJkTGlrZSgpIHtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gIH1cblxuICAvKl9oYW5kbGVDYXJkRGVsZXRlKCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcbiAgfSovXG5cbiAgX2hhbmRsZUNhcmRQcmV2aWV3KCkge1xuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTtcbiAgfVxuXG4gIGRlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xuICB9XG5cbiAgY2FyZExpa2VkKCkge1xuICAgIHJldHVybiB0aGlzLl9saWtlcy5zb21lKChsaWtlKSA9PiBsaWtlLl9pZCA9PT0gdGhpcy5fdXNlcklkKTsgLy9jaGVja3MgaWYgdmFsdWVzIGZvciBzcGVjaWZpYyB1c2VySWQgaW4gdGhlIGxpa2VzIGFycmF0IHdpdGggdGhlIHNhbWUgaWQgYW5kIHJldHVybnNcbiAgfVxuXG4gIF9zZXRMaWtlQnV0dG9uU3RhdGUoKSB7XG4gICAgdGhpcy5fY2FyZExpa2VzID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlcy1jb3VudGVyXCIpO1xuICAgIHRoaXMuX2NhcmRMaWtlcy50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcbiAgICBpZiAodGhpcy5jYXJkTGlrZWQoKSkge1xuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gICAgfVxuICB9XG5cbiAgc2V0TGlrZXNDb3VudGVyKGxpa2VzKSB7XG4gICAgdGhpcy5fbGlrZXMgPSBsaWtlcztcbiAgICB0aGlzLl9zZXRMaWtlQnV0dG9uU3RhdGUoKTtcbiAgfVxuXG4gIC8vYWRkIGVsZW1lbnRzIGFuZCBmdW5jdGlvbmFsaXR5IHRvIGNhcmRcbiAgZ2V0VmlldygpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgLy9nZW5lcmF0ZXMgY2FyZCBuYW1lLCBpbWFnZSBzcmMgYW5kIGFsdFxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbmFtZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9jYXJkTGlrZXMgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2VzLWNvdW50ZXJcIik7XG4gICAgdGhpcy5fY2FyZExpa2VzID0gdGhpcy5fbGlrZXMubGVuZ3RoOyAvL3JldHVybiBsZW5ndGggb2YgYXJyYXkgd2l0aCBjb3VudCBvZiBsaWtlc1xuICAgIC8vZW5hYmxlcyBjbGlja0hhbmRsZXIgZnVuY3Rpb25zXG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIlxuICAgICk7XG4gICAgdGhpcy5fcHJldmlld0J1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1idXR0b25cIik7XG4gICAgLy9JZiB0aGUgdXNlciBoYXMgbm90IGFkZGVkIHRoZSBjYXJkLCByZW1vdmUgdGhlIGRlbGV0ZSBidXR0b24gb24gdGhlIGNhcmRcbiAgICBpZiAodGhpcy5fdXNlcklkICE9IHRoaXMuX3VzZXJDYXJkT3duZXJJZCkge1xuICAgICAgdGhpcy5fZGVsZXRlQnV0dG9uLnJlbW92ZSgpO1xuICAgIH1cbiAgICAvL2lmIHN0YXRlbWVudCBmb3IgY2FyZCBsaWtlZCBzdGF0ZSB3aXRoIGJ1dHRvbiBhY3RpdmUvaW5hY3RpdmVcbiAgICBpZiAodGhpcy5jYXJkTGlrZWQoKSkge1xuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gICAgfVxuICAgIHRoaXMuX3NldENhcmRFdmVudExpc3RlbmVycygpO1xuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDYXJkO1xuIiwiY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gY29uZmlnLmlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IGNvbmZpZy5lcnJvckNsYXNzO1xuICAgIHRoaXMuX2Zvcm0gPSBmb3JtRWxlbWVudDtcbiAgfVxuXG4gIC8vQWRkIE1ldGhvZHNcbiAgLy9TaG93IEVycm9yIEZ1bmN0aW9uIHdpdGggVmFsaWRhdGlvbiBNZXNzYWdlXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIC8vSGlkZSBFcnJvciBGdW5jdGlvbiBhbmQgcmVtb3ZlVmFsaWRhdGlvbiBNZXNzYWdlXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cblxuICAvL0NoZWNrIGlucHV0IGVsZW1lbnQgdmFsaWRpdHkgLT4gaWYgcmV0dXJucyBmYWxzZSwgc2hvdyBpbnB1dCBlcnJvclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH1cbiAgfVxuICAvLy8vXG5cbiAgLy9pcyBJbnB1dCB2YWxpZDogaW5wdXQgbGlzdCBpcyBmcm9tIGlucHV0RWxlbWVudHNcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gIXRoaXMuX2lucHV0RWxlbWVudHMuZXZlcnkoXG4gICAgICAoaW5wdXRFbGVtZW50KSA9PiBpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWRcbiAgICApO1xuICB9XG4gIC8vLy9cbiAgLy9FbmFibGUgQnV0dG9uXG4gIF9lbmFibGVTdWJtaXRCdXR0b24oKSB7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgfVxuICAvLy8vXG5cbiAgLy9EaXNhYmxlIEJ1dHRvblxuICBfZGlzYWJsZVN1Ym1pdEJ1dHRvbigpIHtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG4gIH1cbiAgLy8vL1xuXG4gIC8vLy9cbiAgLy90b2dnbGUgYnV0dG9uIHN0YXRlXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQodGhpcy5faW5wdXRFbGVtZW50cykpIHtcbiAgICAgIHRoaXMuX2Rpc2FibGVTdWJtaXRCdXR0b24oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fZW5hYmxlU3VibWl0QnV0dG9uKCk7XG4gICAgfVxuICB9XG4gIC8vLy9cbiAgLy8vL1xuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5faW5wdXRFbGVtZW50cyA9IFsuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcildO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICAgIC8vIGhlcmUgeW91IGRpc2FibGUgdGhlIGJ1dHRvbiB3aGVuIHlvdSBzdGFydCB0aGUgcHJvamVjdFxuICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAvLyBoZXJlIHlvdSBhZGQgdGhlIGByZXNldGAgaGFuZGxlclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInJlc2V0XCIsICgpID0+IHtcbiAgICAgIC8vIGBzZXRUaW1lb3V0YCBpcyBuZWVkZWQgdG8gd2FpdCB0aWxsIHRoZSBmb3JtIGlzIGZ1bGx5IHJlc2V0IGFuZCB0aGVuIGNhbGwgYHRvZ2dsZUJ1dHRvblN0YXRlYFxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0sIDApOyAvLyBpdOKAmXMgZW5vdWdoIHRvIHB1dCAwIG1zIGhlcmVcbiAgICB9KTtcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIGVuYWJsZVZhbGlkYXRpb25cbiAgLy9HZXQgYW5kIGxvb3AgdGhyb3VnaCBmb3JtRWxlbWVudFxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XG4iLCIvL1BvcHVwIGNsYXNzIG9wZW5zIGFuZCBjbG9zZXMgcG9wdXAgd2luZG93XG5jbGFzcyBQb3B1cCB7XG4gIC8vYWRkIGNvbnN0cnVjdG9yIC0gMXBhcmFtID0gcG9wdXAgc2VsZWN0b3JcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpOyAvL0NTUyBzZWxlY3RvciBwb3B1cCAtcHJldmlldy9wcm9maWxlL2NhcmRlZGl0XG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgLy9wdWJsaWMgb3BlbiBtZXRob2RcbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9oYW5kbGVPdmVybGF5Q2xvc2UpO1xuICB9XG5cbiAgLy9wdWJsaWMgY2xvc2UgbWV0aG9kXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMuX2hhbmRsZU92ZXJsYXlDbG9zZSk7XG4gIH1cblxuICAvL3N0b3JlIGxvZ2ljIGZvciBjbG9zaW5nIHBvcHVwIHdpdGggRXNjIGtleVxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICAvL2FkZCBjbG9zZSB3aXRoIG92ZXJsYXkgZnVuY3Rpb25cbiAgX2hhbmRsZU92ZXJsYXlDbG9zZSA9IChldnQpID0+IHtcbiAgICBpZiAoXG4gICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX29wZW5lZFwiKSB8fFxuICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fY2xvc2VcIilcbiAgICApIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH07XG5cbiAgLy9TZXQgRXZlbnQgTGlzdGVuZXJzIGZvciBYIGljb24gYW5kIG92ZXJsYXkgY2xpY2sgYW5kIEVzY1xuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAvL2Nsb3NlIHdpdGggaWNvbiBjbGljayBhbmQgd2l0aCBFc2MgYW5kIG92ZXJsYXkgY2xpY2tcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuY2xvc2UoKSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXA7XG4iLCIvL0NoaWxkIG9mIFBvcHVwXG4vL0NoYW5nZXMgcGFyZW50IHRvIHVwZGF0ZSBmb3Jtc1xuaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7IC8vU2VsZWN0IGZvcm0gY2xhc3NcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIik7IC8vZ2V0IGFsbCBpbnB1dCBmaWVsZCBjbGFzc2VzIGZyb20gZm9ybXNcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgfVxuXG4gIC8vQ29sbGVjdCBkYXRhIGZyb20gaW5wdXQgZmllbGQgYW5kIHJldHVybiBhcyBvYmplY3RcbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIHRoaXMuX2Zvcm1WYWx1ZXMgPSB7fTsgLy9lbXB0eSBvYmplY3RcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIHRoaXMuX2Zvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5fZm9ybVZhbHVlczsgLy8gaW5wdXQgZmllbGQgZGF0YSByZXR1cm5lZCBhcyBvYmplY3RcbiAgfVxuXG4gIC8vL01vZGlmeSBwYXJlbnQgc2V0IGV2ZW50IGxpc3RlbmVycyAtIGFkZCBzdWJtaXQgZXYgaGFuZGxlciBhbmQgY2xpY2sgZXZlbnQgdG8gY2xvc2UgaWNvblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpOyAvL0Nsb3NlIHdpdGggWCBpY29uIGFuZCBvdmVybGF5IGNsaWNrXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpOyAvL3Bhc3MgaW4gdmFsdWVzIGZyb20gb2JqZWN0IHdpdGggaW5wdXQgdmFsdWVzXG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpOyAvL2NhbGwgY2xvc2UgZm9yIHBhcmVudFxuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpOyAvL3Jlc2V0IHZhbHVlcyBvZiBmb3JtIG9uIGNsb3NlIC0gb25seSB3b3JrcyBvbiB0aGlzIGNoaWxkXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoRm9ybTtcbiIsIi8vSW5pdGlhbCBDYXJkcyB0byBiZSByZW5kZXJlZFxuZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnIFwiLFxuICB9LFxuXTtcblxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19idXR0b25cIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uX2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfaW5wdXRfdHlwZVwiLFxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXG59O1xuXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vUHJvZmlsZSBDb25zdGFudHNcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCJcbik7XG5cbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtbW9kYWxcIik7XG5cbmV4cG9ydCBjb25zdCBwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fdGl0bGVcIik7XG5cbmV4cG9ydCBjb25zdCBwcm9maWxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiXG4pO1xuXG5leHBvcnQgY29uc3QgbW9kYWxJbnB1dE5hbWVGaWVsZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWwtbmFtZVwiKTtcblxuZXhwb3J0IGNvbnN0IG1vZGFsSW5wdXREZXNjcmlwdGlvbkZpZWxkID1cbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1kZXNjcmlwdGlvblwiKTtcblxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vL0NhcmQgQ29uc3RhbnRzXG5leHBvcnQgY29uc3QgY2FyZEVkaXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC1lZGl0LW1vZGFsXCIpO1xuZXhwb3J0IGNvbnN0IGNhcmRFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xuXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vUHJvZmlsZSBBdmF0YXIgQ29uc3RhbnRzXG5leHBvcnQgY29uc3QgYXZhdGFyRWRpdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIjcHJvZmlsZWltYWdlLWVkaXQtbW9kYWxcIlxuKTtcblxuZXhwb3J0IGNvbnN0IHByb2ZpbGVBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGVpbWFnZS1saW5rXCIpO1xuXG5leHBvcnQgY29uc3QgYXZhdGFyQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXItZWRpdFwiKTtcbiIsIi8vSW1wb3J0c1xuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aENvbmZpcm1hdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcbmltcG9ydCB7XG4gIGluaXRpYWxDYXJkcyxcbiAgY29uZmlnLFxuICBwcm9maWxlRWRpdEJ1dHRvbixcbiAgcHJvZmlsZUVkaXRNb2RhbCxcbiAgcHJvZmlsZU5hbWUsXG4gIHByb2ZpbGVEZXNjcmlwdGlvbixcbiAgbW9kYWxJbnB1dE5hbWVGaWVsZCxcbiAgbW9kYWxJbnB1dERlc2NyaXB0aW9uRmllbGQsXG4gIGNhcmRFZGl0TW9kYWwsXG4gIGNhcmRFZGl0QnV0dG9uLFxuICBhdmF0YXJFZGl0TW9kYWwsXG4gIHByb2ZpbGVBdmF0YXIsXG4gIGF2YXRhckJ1dHRvbixcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vL1NldHVwIEFQSSBiYXNlVXJsIGFuZCBoZWFkZXJzIHdpdGggdG9rZW4gYW5kIGdyb3VwSURcbi8vVXNlZCB0byBjYWxsIG1ldGhvZHMgZnJvbSBBcGkgY2xhc3MgZm9yIGZ1bmN0aW9uc1xuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMlwiLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogXCI4NzFjZmQ3OS0yNGIxLTQ2OWUtOWFhMy00ZTRhNmZmNThmZGNcIixcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgfSxcbn0pO1xuXG4vL09yZGVyIHRvIGNhbGwgYW5kIGdldCBpbmZvXG4vLzEuIExvYWQgdXNlciBpbmZvIGFwaS5nZXRVc2VySW5mbygpIC0tRE9ORSBpbiBnZXRBUElJbmZvXG4vLzIuIEdldCBpbml0aWFsIGNhcmRzIHdpdGggYXBpLmdldEluaXRpYWxDYXJkcygpIC0tRE9ORSBpbiBnZXRBUElJbmZvXG4vLzMuIFVzZSBnZXRBUElJbmZvIHRvIGFzc2lnbiB1c2VySWQsIGFuZCBnZXQgaW5mbyBmb3IgaW5pdGlhbCBjYXJkcyBhbmQgdXNlcmluZm8gdmFsdWVzIC0tIERPTkVcbi8vNC4gVXBkYXRlIFByb2ZpbGUgaW5mbyB1c2luZyB1cGRhdGVQcm9maWxlSW5mbyhuYW1lLGFib3V0KSAtPiBhZGRlZCBhbmQgY2FsbGVkIGluIHByb2ZpbGVQb3B1cCBjYWxsYmFjayBmdW5jdGlvbiAtLURPTkVcbi8vNS4gQWRkIG5ldyBjYXJkIGluIGNhcmRDcmVhdGUgdXNpbmcgYWRkTmV3Q2FyZChuYW1lLCBsaW5rKSAtPiBhZGRlZCBhbmQgY2FsbGVkIGluIGNhcmRGb3JtIHNlY3Rpb24gLS1ET05FXG4vLzYuIERlbGV0ZSBjYXJkIGluIGNhcmRDcmVhdGUgdXNpbmcgZGVsZXRlVXNlckNhcmQoY2FyZElkKSAtPiBhZGRlZCBhbmQgY2FsbGVkIGluIGNyZWF0ZUNhcmQgaGFuZGxlRGVsZXRlQ2xpY2sgY2FsbGJhY2sgZnVuY3Rpb24gLS1ET05FXG4vLzcuIEFkZC9SZW1vdmUgbGlrZXMgaW4gY2FyZENyZWF0ZSB1c2luZyByZW1vdmVDYXJkTGlrZXMoY2FyZElkKS9hZGRDYXJkTGlrZXMoY2FyZElkKSAtPiBhZGRlZCBhbmQgY2FsbGVkIGluIGNyZWF0ZUNhcmQgaGFuZGxlTGlrZUNsaWNrIGNhbGxiYWNrIGZ1bmN0aW9uIC0tRE9ORVxuLy84LiBVcGRhdGUgcHJvZmlsZSBwaWMgaW4gYXZhdGFyUG9wdXAgdXNpbmcgdXBkYXRlUHJvZmlsZUF2YXRhcihhdmF0YXIpIC0+IGFkZGVkIGFuZCBjYWxsZWQgaW4gYXZhdGFyUG9wdXAgLS1ET05FXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vRm9ybSBWYWxpZGF0aW9ucyBJbnN0YW5jZXMgYW5kIGZ1bmN0aW9uIGZyb20gY2xhc3NcbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBwcm9maWxlRWRpdE1vZGFsKTtcbmNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGNhcmRFZGl0TW9kYWwpO1xuY29uc3QgYXZhdGFyRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgYXZhdGFyRWRpdE1vZGFsKTtcbmF2YXRhckZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5lZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5hZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmF2YXRhckZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy9Qcm9maWxlIE1vZGFsIEZ1bmN0aW9uc1xuLy9Vc2VyIEluZm8gY2FsbGJhY2tcbmNvbnN0IHVzZXJpbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgdXNlck5hbWU6IHByb2ZpbGVOYW1lLFxuICB1c2VySm9iOiBwcm9maWxlRGVzY3JpcHRpb24sXG4gIHVzZXJBdmF0YXI6IHByb2ZpbGVBdmF0YXIsIC8vYWRkZWQgZm9yIGF2YXRhclxufSk7XG5cbmZ1bmN0aW9uIG9wZW5Qcm9maWxlRWRpdEZvcm0oKSB7XG4gIGNvbnN0IHsgbmFtZSwgYWJvdXQgfSA9IHVzZXJpbmZvLmdldFVzZXJJbmZvKCk7IC8vd2FzIGRlc2NyaXB0aW9uLCB0aXRsZVxuICBtb2RhbElucHV0TmFtZUZpZWxkLnZhbHVlID0gbmFtZTtcbiAgbW9kYWxJbnB1dERlc2NyaXB0aW9uRmllbGQudmFsdWUgPSBhYm91dDtcbiAgcHJvZmlsZVBvcHVwLm9wZW4oKTtcbn1cblxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9wZW5Qcm9maWxlRWRpdEZvcm0pO1xuXG4vL0FkZCBQcm9maWxlIEZvcm0gaW5wdXQgYW5kIHNldCBvbiBwYWdlXG5jb25zdCBwcm9maWxlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNwcm9maWxlLWVkaXQtbW9kYWxcIiwgKHZhbHVlcykgPT4ge1xuICAvLzEuIHNldCB0aW1lciBsb2FkaW5nIHVwIGZvciBidXR0b25cbiAgYXBpXG4gICAgLnVwZGF0ZVByb2ZpbGVJbmZvKHZhbHVlcylcbiAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgdXNlcmluZm8uc2V0VXNlckluZm8oZGF0YSk7XG4gICAgICBwcm9maWxlUG9wdXAuY2xvc2UoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIH0pO1xuICAvLyA1LiBmaW5hbGx5IHR1cm4gb2YgdGltZXIgZm9yIGJ1dHRvblxufSk7XG5cbnByb2ZpbGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vL0FkZCBQcm9maWxlIEF2YXRhciBpbnB1dCBhbmQgc2V0IG9uIHBhZ2VcbmNvbnN0IGF2YXRhclBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjcHJvZmlsZWltYWdlLWVkaXQtbW9kYWxcIiwgKHZhbHVlcykgPT4ge1xuICAvLzEuIHNldCB0aW1lciBmb3IgYnV0dG9uXG4gIGFwaVxuICAgIC51cGRhdGVQcm9maWxlQXZhdGFyKHZhbHVlcy5saW5rKVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICB1c2VyaW5mby5zZXRVc2VySW5mbyhkYXRhKTtcbiAgICAgIGF2YXRhclBvcHVwLmNsb3NlKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9KTtcbiAgLy9jbG9zZSB0aW1lciBidXR0b24gd2l0aCBmaW5hbGx5IHN0YXRlbWVudFxufSk7XG5cbmF2YXRhckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gYXZhdGFyUG9wdXAub3BlbigpKTtcblxuYXZhdGFyUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy9BZGQgQ2FyZCBhbmQgUG9wdXAgSW5zdGFuY2VzXG4vL3ByZXZpZXcgUG9wdXAgKHBvcHVwU2VsZWN0b3IpXG5jb25zdCBwcmV2aWV3UG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjcHJldmlldy1tb2RhbFwiKTtcbmNvbnN0IGRlbGV0ZUNhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhDb25maXJtYXRpb24oXCIjZGVsZXRlLWNvbmZpcm0tbW9kYWxcIik7XG5cbmRlbGV0ZUNhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5sZXQgdXNlcklkO1xuLy9GdW5jdGlvbiB0byBjcmVhdGUgbmV3IGNhcmQgY2FsbGVkIHdpdGggcmVuZGVyZXIgLSBhZGQgdXNlcklkIGFmdGVyIGNhcmREYXRhIGFuZCBiZWZvcmUgI3RlbXBsYXRlXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGNhcmREYXRhKSB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcbiAgICBjYXJkRGF0YSwgLy91bmRlZmluZWQgLSBkYXRhIHRvIGJlIGFkZGVkIHRvIGZvcm0/XG4gICAgdXNlcklkLCAvL3VuZGVmaW5lZCAtIHdoZXJlIGlzIHRoaXMgZGF0YSBjb21pbmcgZnJvbT9cbiAgICBcIiNjYXJkLXRlbXBsYXRlXCIsXG4gICAgLy9oYW5kbGVDYXJkQ2xpY2tcbiAgICAoY2FyZE5hbWUsIGNhcmRMaW5rKSA9PiB7XG4gICAgICBwcmV2aWV3UG9wdXAub3BlbihjYXJkTmFtZSwgY2FyZExpbmspO1xuICAgIH0sXG4gICAgLy9oYW5kbGVEZWxldGVDbGlja1xuICAgIChjYXJkSWQpID0+IHtcbiAgICAgIGRlbGV0ZUNhcmRQb3B1cC5vcGVuKCk7XG4gICAgICBkZWxldGVDYXJkUG9wdXAuc2V0U3VibWl0QWN0aW9uKCgpID0+IHtcbiAgICAgICAgYXBpLmRlbGV0ZVVzZXJDYXJkKGNhcmRJZCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgZGVsZXRlQ2FyZFBvcHVwLmNsb3NlKCk7XG4gICAgICAgICAgY2FyZC5kZWxldGVDYXJkKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7IC8vY2FsbGJhY2tmdW5jdGlvbiB0byBkZWxldGUgY2FyZCBjbG9zZSBwb3B1cCBhbmRyZW1vdmUgY2FyZCBlbGVtZW50XG4gICAgfSxcbiAgICAvL2hhbmRsZUxpa2VDbGljayAtIHRvIGJlIGFkZGVkIHRvIENhcmQuanNcbiAgICAoY2FyZElkKSA9PiB7XG4gICAgICBpZiAoY2FyZC5jYXJkTGlrZWQoKSkge1xuICAgICAgICBhcGlcbiAgICAgICAgICAuYWRkQ2FyZExpa2VzKGNhcmRJZClcbiAgICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgY2FyZC5zZXRMaWtlc0NvdW50ZXIoZGF0YS5saWtlcyk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFwaVxuICAgICAgICAgIC5yZW1vdmVDYXJkTGlrZXMoY2FyZElkKVxuICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICBjYXJkLnNldExpa2VzQ291bnRlcihkYXRhLmxpa2VzKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNhcmQ7XG4gICAgfVxuICApO1xuICAvL2NhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZC5nZXRWaWV3KCkpO1xufVxuXG5jb25zdCBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxuICB7XG4gICAgcmVuZGVyZXI6IChjYXJkRGF0YSkgPT4ge1xuICAgICAgY29uc3QgbmV3Q2FyZCA9IGNyZWF0ZUNhcmQoY2FyZERhdGEpO1xuICAgICAgY2FyZFNlY3Rpb24uYWRkSXRlbShuZXdDYXJkLmdldFZpZXcoKSk7XG4gICAgfSxcbiAgfSxcbiAgXCIuY2FyZHNfX2xpc3RcIlxuKTtcblxuLy9SZW5kZXIgSW5pdGlhbCBDYXJkcyA9PiB0byBiZSByZW1vdmVkIGZvciBBUElcbi8qY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXG4gICAgcmVuZGVyZXI6IChjYXJkRGF0YSkgPT4ge1xuICAgICAgY29uc3QgY2FyZCA9IGNyZWF0ZUNhcmQoY2FyZERhdGEpO1xuICAgICAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkLmdldFZpZXcoKSk7XG4gICAgfSxcbiAgfSxcbiAgXCIuY2FyZHNfX2xpc3RcIlxuKTtcblxuY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTsqL1xuXG4vL0FkZCBuZXcgY2FyZCB3aXRoIGFkZCBjYXJkIGZvcm1cbmNvbnN0IGFkZENhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI2NhcmQtZWRpdC1tb2RhbFwiLCAodmFsdWVzKSA9PiB7XG4gIC8vMS4gc2V0dXAgdGltZXIgYnV0dG9uXG4gIGFwaVxuICAgIC5hZGROZXdDYXJkKHZhbHVlcylcbiAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgY3JlYXRlQ2FyZChkYXRhKTtcbiAgICAgIGFkZENhcmRQb3B1cC5jbG9zZSgpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfSk7XG4gIC8vNi4gZmluYWxseSB0dXJuIG9mZiB0aW1lciBidXR0b25cbiAgLy9jb25zdCBuZXdDYXJkID0gY3JlYXRlQ2FyZChjYXJkRGF0YSk7XG4gIC8vY2FyZFNlY3Rpb24uYWRkSXRlbShuZXdDYXJkLmdldFZpZXcoKSk7XG59KTtcblxuLy9PcGVuIGNhcmQgcG9wdXAgd2l0aCBvcGVuIGFuZCBjbGljayBsaXN0ZW5lclxuY2FyZEVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGFkZENhcmRQb3B1cC5vcGVuKCkpO1xuXG5hZGRDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy9HZXQgdXNlciBpbmZvcm1hdGlvbiBhbmQgY2FyZCBkYXRhIGZyb20gc2VydmVyXG5hcGkuZ2V0QVBJSW5mbygpLnRoZW4oKFtjYXJkcywgdXNlckRhdGFdKSA9PiB7XG4gIHVzZXJJZCA9IHVzZXJEYXRhLl9pZDsgLy9hc3NpZ24gLl9pZCB0byB1c2VySWQgdmFyaWFibGVcbiAgY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoY2FyZHMpLCB1c2VyaW5mby5zZXRVc2VySW5mbyh1c2VyRGF0YSk7IC8vc2V0IG1ldGhvZHMgdG8gcmVuZGVyIGNhcmRzIHVzaW5nIGNhcmQgZGF0YSBmcm9tIEFQSSwgYW5kIHVzZXIgaW5mbyBmcm9tIEFQSSB1c2VyZGF0YVxufSk7XG4iLCIvLyBSZW5kZXIgVXNlciBpbmZvIG9uIHRoZSBwYWdlXG5cbmNsYXNzIFVzZXJJbmZvIHtcbiAgLy9hZGQgY29uc3RydWN0b3IgLSB0YWtlIGluIG9iaiAtIHNlbGVjdG9ycyBvZiB0d28gZWxlbWVudHNcbiAgY29uc3RydWN0b3IoeyB1c2VyTmFtZSwgdXNlckpvYiwgdXNlckF2YXRhciB9KSB7XG4gICAgdGhpcy5fdXNlck5hbWUgPSB1c2VyTmFtZTsgLy9wcm9maWxlIHRpdGxlXG4gICAgdGhpcy5fdXNlckRlc2NyaXB0aW9uID0gdXNlckpvYjsgLy9wcm9maWxlIGRlc2NyaXB0aW9uXG4gICAgdGhpcy5fdXNlckF2YXRhciA9IHVzZXJBdmF0YXI7XG4gIH1cblxuICAvL3JldHVybiBvYmplY3Qgd2l0aCBpbmZvIGFib3V0IHVzZXIgLT4gbmVlZCB0byByZXR1cm4gdmFsdWVzIGZyb20gdGhlcmUgYWxyZWFkeVxuICAvL2luIGluZGV4LmpzLCB2YWx1ZSBnZXRzIHJldHVybmVkIHRvIHZhcmlhYmxlXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCwgLy93YXMgdGl0bGVcbiAgICAgIGFib3V0OiB0aGlzLl91c2VyRGVzY3JpcHRpb24udGV4dENvbnRlbnQsIC8vd2FzIGRlc2NyaXB0aW9uXG4gICAgICAvL2F2YXRhcjogdGhpcy5fdXNlckF2YXRhci5zcmMsXG4gICAgfTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKHZhbHVlKSB7XG4gICAgdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQgPSB2YWx1ZS5uYW1lOyAvL3dhcyB0aXRsZVxuICAgIHRoaXMuX3VzZXJEZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IHZhbHVlLmFib3V0OyAvL3dhcyBkZXNjcmlwdGlvblxuICAgIHRoaXMuX3VzZXJBdmF0YXIuc3JjID0gdmFsdWUuYXZhdGFyO1xuICAgIHRoaXMuX3VzZXJBdmF0YXIuYWx0ID0gdmFsdWUudGl0bGU7XG4gIH1cblxuICAvL25lZWQgdG8gZ2V0IGF2YXRhciBpbmZvIGZyb20gcmV0dXJuIHN0YXRlbWVudCAtIGhvdyB0byBkbyB0aGlzXG4gIC8qc2V0VXNlckltYWdlKHZhbHVlKSB7XG4gICAgdGhpcy5fdXNlckF2YXRhci5zcmMgPSB2YWx1ZS5hdmF0YXI7XG4gICAgdGhpcy5fdXNlckF2YXRhci5hbHQgPSB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudDtcbiAgfSAvL05vIGF2YXRhciBkYXRhIGNhbGxlZCovXG59XG5cbmV4cG9ydCBkZWZhdWx0IFVzZXJJbmZvO1xuIiwiLy9DaGlsZCBvZiBQb3B1cFxuLy9DaGFuZ2VzIHBhcmVudCBvcGVuIG1ldGhvZCB0byBhZGQgaW1hZ2UgdG8gcG9wdXAgd2l0aCBzcmMgYW5kIGNhcHRpb25cbmltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5jbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIC8vaW5zdGFudGlhdGUgcGFyZW50IGNvbnN0cnVjdG9yIGFuZCBnZXQgYWNjZXNzIHRvIHBvcHVwZWxlbWVudCBmcm9tIHBhcmVudFxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgICAvL3NldCBuYW1lIGFuZCBsaW5rIHByb3BlcnRpZXMgZnJvbSBwb3B1cFByZXZpZXcgdG8gYXNzaWduIHZhbHVlcyB3aXRoIG9wZW5cbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLnByZXZpZXctbW9kYWxfX2ltYWdlXCJcbiAgICApO1xuICAgIHRoaXMuX3ByZXZpZXdOYW1lID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5wcmV2aWV3LW1vZGFsX19jYXB0aW9uXCJcbiAgICApO1xuICB9XG4gIG9wZW4obmFtZSwgbGluaykge1xuICAgIHRoaXMuX3ByZXZpZXdJbWFnZS5zcmMgPSBsaW5rO1xuICAgIHRoaXMuX3ByZXZpZXdJbWFnZS5hbHQgPSBuYW1lO1xuICAgIHRoaXMuX3ByZXZpZXdOYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICBzdXBlci5vcGVuKCk7IC8vcGFyZW50IG9wZW4gbWV0aG9kIGNhbGxlZFxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEltYWdlO1xuIiwiLy9IYW5kbGVzIFllcyBzdWJtaXQgb24gZGVsZXRlIGNvbmZpcm0gcG9wdXBcbmltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5jbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7IC8vU2VsZWN0IGZvcm0gY2xhc3MgZm9yIGRlbGV0ZSBmb3JtXG4gICAgLy90aGlzLl9jb25maXJtQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNkZWxldGUtY29uZmlybS1idXR0b25cIik7IC8vWWVzIGJ1dHRvbiBpbiBmb3JtIGZvciBkZWxldGUgY2hlY2tcbiAgfVxuXG4gIC8vU2V0IGZ1bmN0aW9uIGZvciBzdWJtaXQgYWN0aW9uXG4gIHNldFN1Ym1pdEFjdGlvbihhY3Rpb24pIHtcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXQgPSBhY3Rpb247XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpOyAvL3NldCBwYXJlbnQgZXZlbnQgbGlzdGVuZXJzXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVTdWJtaXQoKTsgLy9jYWxsYmFjayBmdW5jdGlvbiB0byBiZSBzZXRcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhDb25maXJtYXRpb247XG4iLCIvL1NlY3Rpb24gY2xhc3MgcmVuZGVycyBsaXN0IG9mIGVsZW1lbnRzIG9uIHBhZ2VcbmNsYXNzIFNlY3Rpb24ge1xuICAvL2FkZCBjb25zdHJ1Y3RvclxuICBjb25zdHJ1Y3Rvcih7IHJlbmRlcmVyIH0sIGNsYXNzU2VsZWN0b3IpIHtcbiAgICAvL3RoaXMuX2l0ZW1zQXJyYXkgPSBpdGVtczsgLy9kYXRhIGFycmF5XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjsgLy9mdW5jdGlvbiB0byBjcmVhdGUvcmVuZGVyIGRhdGEgb24gcGFnZVxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY2xhc3NTZWxlY3Rvcik7IC8vQ1NTIHNlbGVjdG9yIGZvciB3aGVyZSB0byBlbWJlZCBpdGVtXG4gIH1cblxuICAvL21ldGhvZCB0byByZW5kZXIgYWxsIGVsZW1lbnRzIG9uIHBhZ2UgLSBjaGFuZ2VkIGl0ZW1zQXJyYXkgdG8gY2FyZHMgaW4gc2VjdGlvbiBmb3IgZ2V0QVBJaW5mb1xuICByZW5kZXJJdGVtcygpIHtcbiAgICBjYXJkcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTsgLy9yZW5kZXJlciBmdW1jdGlvbiByZW5kZXJzIGVhY2ggZWxlbWVudCBvbiBwYWdlXG4gICAgfSk7XG4gIH1cblxuICAvL21ldGhvZCB0byB0YWtlIERPTSBlbGVtZW50IGFuZCBhZGQgdG8gY29udGFpbmVyXG4gIGFkZEl0ZW0oaXRlbSkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGl0ZW0pOyAvL2FwcGVuZCBlbGVtZW50IHRvIHBhZ2VcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBTZWN0aW9uO1xuIl0sIm5hbWVzIjpbImNvbnN0cnVjdG9yIiwiZGF0YSIsInVzZXJJZCIsImNhcmRTZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZURlbGV0ZUNsaWNrIiwiaGFuZGxlTGlrZUNsaWNrIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9pZCIsIl9saWtlcyIsImxpa2VzIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlRGVsZXRlQ2xpY2siLCJfaGFuZGxlTGlrZUNsaWNrIiwiX3VzZXJJZCIsIl91c2VyQ2FyZE93bmVySWQiLCJfZ2V0VGVtcGxhdGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX3NldENhcmRFdmVudExpc3RlbmVycyIsIl9saWtlQnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9kZWxldGVCdXR0b24iLCJfY2FyZEltYWdlIiwiX2hhbmRsZUNhcmRQcmV2aWV3IiwiX2hhbmRsZUNhcmRMaWtlIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiZGVsZXRlQ2FyZCIsIl9jYXJkRWxlbWVudCIsInJlbW92ZSIsImNhcmRMaWtlZCIsInNvbWUiLCJsaWtlIiwiX3NldExpa2VCdXR0b25TdGF0ZSIsIl9jYXJkTGlrZXMiLCJ0ZXh0Q29udGVudCIsImxlbmd0aCIsImFkZCIsInNldExpa2VzQ291bnRlciIsImdldFZpZXciLCJzcmMiLCJhbHQiLCJfcHJldmlld0J1dHRvbiIsImNvbmZpZyIsImZvcm1FbGVtZW50IiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm0iLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsZW1lbnQiLCJlcnJvckVsZW1lbnQiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGFzSW52YWxpZElucHV0IiwiX2lucHV0RWxlbWVudHMiLCJldmVyeSIsIl9lbmFibGVTdWJtaXRCdXR0b24iLCJfYnV0dG9uRWxlbWVudCIsImRpc2FibGVkIiwiX2Rpc2FibGVTdWJtaXRCdXR0b24iLCJ0b2dnbGVCdXR0b25TdGF0ZSIsIl9zZXRFdmVudExpc3RlbmVycyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJzZXRUaW1lb3V0IiwiZm9yRWFjaCIsImVuYWJsZVZhbGlkYXRpb24iLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsIl9yZWYiLCJwb3B1cFNlbGVjdG9yIiwidGFyZ2V0IiwiY29udGFpbnMiLCJjbG9zZSIsIl9wb3B1cEVsZW1lbnQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwib3BlbiIsIl9oYW5kbGVPdmVybGF5Q2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJQb3B1cCIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9wb3B1cEZvcm0iLCJfaW5wdXRMaXN0IiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJfZm9ybVZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJyZXNldCIsImZvcm1TZWxlY3RvciIsInByb2ZpbGVFZGl0QnV0dG9uIiwicHJvZmlsZUVkaXRNb2RhbCIsInByb2ZpbGVOYW1lIiwicHJvZmlsZURlc2NyaXB0aW9uIiwibW9kYWxJbnB1dE5hbWVGaWVsZCIsIm1vZGFsSW5wdXREZXNjcmlwdGlvbkZpZWxkIiwiY2FyZEVkaXRNb2RhbCIsImNhcmRFZGl0QnV0dG9uIiwiYXZhdGFyRWRpdE1vZGFsIiwicHJvZmlsZUF2YXRhciIsImF2YXRhckJ1dHRvbiIsImFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsIl9jaGVja1Jlc3BvbnNlIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImdldFVzZXJJbmZvIiwiZmV0Y2giLCJtZXRob2QiLCJ0aGVuIiwiZ2V0SW5pdGlhbENhcmRzIiwiZ2V0QVBJSW5mbyIsImFsbCIsInVwZGF0ZVByb2ZpbGVJbmZvIiwiYWJvdXQiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImFkZE5ld0NhcmQiLCJkZWxldGVVc2VyQ2FyZCIsImNhcmRJZCIsImFkZENhcmRMaWtlcyIsInJlbW92ZUNhcmRMaWtlcyIsInVwZGF0ZVByb2ZpbGVBdmF0YXIiLCJhdmF0YXIiLCJhdXRob3JpemF0aW9uIiwiZWRpdEZvcm1WYWxpZGF0b3IiLCJGb3JtVmFsaWRhdG9yIiwiYWRkRm9ybVZhbGlkYXRvciIsImF2YXRhckZvcm1WYWxpZGF0b3IiLCJ1c2VyaW5mbyIsInVzZXJOYW1lIiwidXNlckpvYiIsInVzZXJBdmF0YXIiLCJfdXNlck5hbWUiLCJfdXNlckRlc2NyaXB0aW9uIiwiX3VzZXJBdmF0YXIiLCJzZXRVc2VySW5mbyIsInRpdGxlIiwicHJvZmlsZVBvcHVwIiwiUG9wdXBXaXRoRm9ybSIsInZhbHVlcyIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImF2YXRhclBvcHVwIiwicHJldmlld1BvcHVwIiwiX3ByZXZpZXdJbWFnZSIsIl9wcmV2aWV3TmFtZSIsImRlbGV0ZUNhcmRQb3B1cCIsInNldFN1Ym1pdEFjdGlvbiIsImFjdGlvbiIsIl9oYW5kbGVTdWJtaXQiLCJjcmVhdGVDYXJkIiwiY2FyZERhdGEiLCJjYXJkIiwiQ2FyZCIsImNhcmROYW1lIiwiY2FyZExpbmsiLCJjYXJkU2VjdGlvbiIsImNsYXNzU2VsZWN0b3IiLCJyZW5kZXJlciIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsImNhcmRzIiwiaXRlbSIsImFkZEl0ZW0iLCJwcmVwZW5kIiwibmV3Q2FyZCIsImFkZENhcmRQb3B1cCIsInVzZXJEYXRhIl0sInNvdXJjZVJvb3QiOiIifQ==